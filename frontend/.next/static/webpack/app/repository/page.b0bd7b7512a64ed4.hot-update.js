"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/repository/page",{

/***/ "(app-pages-browser)/./lib/googleDrive.ts":
/*!****************************!*\
  !*** ./lib/googleDrive.ts ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkGoogleDriveConfig: function() { return /* binding */ checkGoogleDriveConfig; },\n/* harmony export */   downloadDriveFile: function() { return /* binding */ downloadDriveFile; },\n/* harmony export */   getDriveFile: function() { return /* binding */ getDriveFile; },\n/* harmony export */   isGoogleAuthenticated: function() { return /* binding */ isGoogleAuthenticated; },\n/* harmony export */   listDriveFiles: function() { return /* binding */ listDriveFiles; },\n/* harmony export */   loadGoogleApi: function() { return /* binding */ loadGoogleApi; },\n/* harmony export */   signInWithGoogle: function() { return /* binding */ signInWithGoogle; },\n/* harmony export */   signOutFromGoogle: function() { return /* binding */ signOutFromGoogle; }\n/* harmony export */ });\n// This is a simplified module for Google Drive integration\n// Type definitions for gapi and global window object\n// Check if we're running in a browser environment\nconst isBrowser = \"object\" !== \"undefined\";\n// Load the Google API client library\nconst loadGoogleApi = (useManualCredentials)=>{\n    return new Promise((resolve, reject)=>{\n        // Check if we're in a browser environment\n        if (!isBrowser) {\n            console.warn(\"Google API cannot be loaded in a non-browser environment\");\n            reject(new Error(\"Google API requires a browser environment\"));\n            return;\n        }\n        // Check if the API is already loaded\n        if (window.gapi && window.gapi.client && window.gapi.client.drive) {\n            console.log(\"Google API already loaded\");\n            resolve();\n            return;\n        }\n        // Define a global callback that will be called when the script loads\n        const callbackName = \"googleApiLoaded_\" + Math.random().toString(36).substring(2, 15);\n        window[callbackName] = ()=>{\n            console.log(\"Google API script loaded via callback\");\n            initializeGoogleClient(useManualCredentials, resolve, reject);\n        };\n        const script = document.createElement(\"script\");\n        script.src = \"https://apis.google.com/js/api.js?onload=\".concat(callbackName);\n        script.async = true;\n        script.defer = true;\n        script.onload = ()=>{\n            console.log(\"Google API script onload event triggered\");\n        // The callback will handle initialization\n        };\n        script.onerror = (error)=>{\n            console.error(\"Error loading Google API script:\", error);\n            reject(new Error(\"Failed to load Google API script\"));\n        };\n        document.body.appendChild(script);\n    });\n};\n// Helper function to initialize the Google client\nconst initializeGoogleClient = (useManualCredentials, resolve, reject)=>{\n    if (!window.gapi) {\n        const error = new Error(\"Google API (gapi) not available after loading\");\n        console.error(error);\n        reject === null || reject === void 0 ? void 0 : reject(error);\n        return;\n    }\n    window.gapi.load(\"client:auth2\", async ()=>{\n        console.log(\"Google client and auth2 libraries loaded\");\n        try {\n            // Get API key and client ID\n            let apiKey = \"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\";\n            let clientId = \"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\";\n            // If using manual credentials, try to get them from session storage\n            if (useManualCredentials) {\n                const manualApiKey = sessionStorage.getItem(\"MANUAL_GOOGLE_API_KEY\");\n                const manualClientId = sessionStorage.getItem(\"MANUAL_GOOGLE_CLIENT_ID\");\n                if (manualApiKey && manualClientId) {\n                    apiKey = manualApiKey;\n                    clientId = manualClientId;\n                    console.log(\"Using manually provided Google API credentials\");\n                }\n            }\n            console.log(\"Google Drive API Configuration:\", {\n                apiKeyAvailable: !!apiKey,\n                clientIdAvailable: !!clientId\n            });\n            if (!apiKey || !clientId) {\n                const error = new Error(\"Google Drive API keys not configured\");\n                console.error(error);\n                reject === null || reject === void 0 ? void 0 : reject(error);\n                return;\n            }\n            try {\n                // Initialize the client with your credentials\n                await window.gapi.client.init({\n                    apiKey: apiKey,\n                    clientId: clientId,\n                    discoveryDocs: [\n                        \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"\n                    ],\n                    scope: \"https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.readonly\"\n                });\n                console.log(\"Google API client initialized successfully\");\n                resolve === null || resolve === void 0 ? void 0 : resolve();\n            } catch (error) {\n                console.error(\"Error initializing Google API client:\", {\n                    message: error.message,\n                    details: error,\n                    apiKey: apiKey ? \"Provided\" : \"Missing\",\n                    clientId: clientId ? \"Provided\" : \"Missing\"\n                });\n                reject === null || reject === void 0 ? void 0 : reject(new Error(\"Failed to initialize Google API client: \".concat(error.message || \"Unknown error\")));\n            }\n        } catch (error) {\n            console.error(\"Error in client:auth2 callback:\", error);\n            reject === null || reject === void 0 ? void 0 : reject(new Error(\"Error in Google API initialization: \".concat(error.message || \"Unknown error\")));\n        }\n    });\n};\n// Check if user is authenticated with Google\nconst isGoogleAuthenticated = ()=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        console.warn(\"Google authentication check requires a browser environment\");\n        return false;\n    }\n    if (!window.gapi || !window.gapi.auth2) {\n        console.warn(\"Google API or auth2 not loaded\");\n        return false;\n    }\n    try {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        if (!authInstance) {\n            console.warn(\"Google Auth instance not available\");\n            return false;\n        }\n        const isSignedIn = authInstance.isSignedIn.get();\n        console.log(\"Google authentication status:\", isSignedIn ? \"Authenticated\" : \"Not authenticated\");\n        return isSignedIn;\n    } catch (error) {\n        console.error(\"Error checking Google authentication:\", error);\n        return false;\n    }\n};\n// Sign in with Google\nconst signInWithGoogle = async ()=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google sign-in requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.auth2) {\n        throw new Error(\"Google API not loaded\");\n    }\n    try {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        if (!authInstance) {\n            throw new Error(\"Google Auth instance not available\");\n        }\n        return await authInstance.signIn();\n    } catch (error) {\n        console.error(\"Error signing in with Google:\", error);\n        throw new Error(\"Google sign-in failed: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// Sign out from Google\nconst signOutFromGoogle = async ()=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google sign-out requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.auth2) {\n        throw new Error(\"Google API not loaded\");\n    }\n    try {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        if (!authInstance) {\n            throw new Error(\"Google Auth instance not available\");\n        }\n        return await authInstance.signOut();\n    } catch (error) {\n        console.error(\"Error signing out from Google:\", error);\n        throw new Error(\"Google sign-out failed: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// List Google Drive files\nconst listDriveFiles = async function() {\n    let query = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"\";\n    return new Promise((resolve, reject)=>{\n        try {\n            // Check if we're in a browser environment\n            if (!isBrowser) {\n                throw new Error(\"Google Drive API requires a browser environment\");\n            }\n            // Check if Google API is properly loaded\n            if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n                throw new Error(\"Google Drive API not loaded\");\n            }\n            // Check if user is authenticated\n            if (!isGoogleAuthenticated()) {\n                throw new Error(\"User not authenticated with Google\");\n            }\n            console.log(\"Listing Google Drive files with query:\", query || \"No query\");\n            window.gapi.client.drive.files.list({\n                q: query,\n                fields: \"files(id, name, mimeType, iconLink, modifiedTime, webViewLink)\",\n                orderBy: \"modifiedTime desc\",\n                pageSize: 50\n            }).then((response)=>{\n                console.log(\"Google Drive files retrieved:\", response.result.files.length);\n                resolve(response.result.files);\n            }).catch((error)=>{\n                console.error(\"Error listing Google Drive files:\", error);\n                reject(error);\n            });\n        } catch (error) {\n            console.error(\"Error in listDriveFiles:\", error);\n            reject(error);\n        }\n    });\n};\n// Get a specific file from Google Drive\nconst getDriveFile = async (fileId)=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google Drive API requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n        throw new Error(\"Google Drive API not loaded\");\n    }\n    try {\n        const response = await window.gapi.client.drive.files.get({\n            fileId: fileId,\n            fields: \"id, name, mimeType, iconLink, modifiedTime, webViewLink, webContentLink\"\n        });\n        return response.result;\n    } catch (error) {\n        console.error(\"Error getting Drive file:\", error);\n        throw new Error(\"Failed to get Drive file: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// Download a file from Google Drive\nconst downloadDriveFile = async (fileId)=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google Drive API requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n        throw new Error(\"Google Drive API not loaded\");\n    }\n    try {\n        const response = await window.gapi.client.drive.files.get({\n            fileId: fileId,\n            alt: \"media\"\n        });\n        return response.body;\n    } catch (error) {\n        console.error(\"Error downloading Drive file:\", error);\n        throw new Error(\"Failed to download Drive file: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// Check if Google Drive API is properly configured\nconst checkGoogleDriveConfig = async ()=>{\n    var _window_gapi, _window_gapi1, _window_gapi_client, _window_gapi2;\n    const apiKey = \"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\";\n    const clientId = \"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\";\n    const errors = [];\n    if (!apiKey) errors.push(\"API Key is missing\");\n    if (!clientId) errors.push(\"Client ID is missing\");\n    const config = {\n        apiKey: apiKey ? true : false,\n        clientId: clientId ? true : false,\n        isConfigured: !!(apiKey && clientId),\n        errors: errors,\n        apiStatus: {\n            gapiLoaded: isBrowser && !!window.gapi,\n            clientLoaded: isBrowser && !!((_window_gapi = window.gapi) === null || _window_gapi === void 0 ? void 0 : _window_gapi.client),\n            authLoaded: isBrowser && !!((_window_gapi1 = window.gapi) === null || _window_gapi1 === void 0 ? void 0 : _window_gapi1.auth2),\n            driveLoaded: isBrowser && !!((_window_gapi2 = window.gapi) === null || _window_gapi2 === void 0 ? void 0 : (_window_gapi_client = _window_gapi2.client) === null || _window_gapi_client === void 0 ? void 0 : _window_gapi_client.drive)\n        }\n    };\n    console.log(\"Google Drive API configuration:\", config);\n    return config;\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBWTtRQUNuQnRCLFFBQVFzQixLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxNQUFNLElBQUlwQixNQUFNLGtDQUFtRSxPQUFqQ29CLE1BQU1tQixPQUFPLElBQUk7SUFDckU7QUFDRixFQUFFO0FBRUYsbURBQW1EO0FBQzVDLE1BQU02Qix5QkFBeUI7UUFlSG5FLGNBQ0ZBLGVBQ0NBLHFCQUFBQTtJQWhCaEMsTUFBTXVCLFNBQVNDLHlDQUFzQztJQUNyRCxNQUFNRyxXQUFXSCwwRUFBd0M7SUFFekQsTUFBTTRDLFNBQVMsRUFBRTtJQUNqQixJQUFJLENBQUM3QyxRQUFRNkMsT0FBT0MsSUFBSSxDQUFDO0lBQ3pCLElBQUksQ0FBQzFDLFVBQVV5QyxPQUFPQyxJQUFJLENBQUM7SUFFM0IsTUFBTUMsU0FBUztRQUNiL0MsUUFBUUEsU0FBUyxPQUFPO1FBQ3hCSSxVQUFVQSxXQUFXLE9BQU87UUFDNUI0QyxjQUFjLENBQUMsQ0FBRWhELENBQUFBLFVBQVVJLFFBQU87UUFDbEN5QyxRQUFRQTtRQUNSSSxXQUFXO1lBQ1RDLFlBQVlsRixhQUFhLENBQUMsQ0FBQ1MsT0FBT0MsSUFBSTtZQUN0Q3lFLGNBQWNuRixhQUFhLENBQUMsR0FBQ1MsZUFBQUEsT0FBT0MsSUFBSSxjQUFYRCxtQ0FBQUEsYUFBYUUsTUFBTTtZQUNoRHlFLFlBQVlwRixhQUFhLENBQUMsR0FBQ1MsZ0JBQUFBLE9BQU9DLElBQUksY0FBWEQsb0NBQUFBLGNBQWF5QyxLQUFLO1lBQzdDbUMsYUFBYXJGLGFBQWEsQ0FBQyxHQUFDUyxnQkFBQUEsT0FBT0MsSUFBSSxjQUFYRCxxQ0FBQUEsc0JBQUFBLGNBQWFFLE1BQU0sY0FBbkJGLDBDQUFBQSxvQkFBcUJHLEtBQUs7UUFDeEQ7SUFDRjtJQUVBTixRQUFRTyxHQUFHLENBQUMsbUNBQW1Da0U7SUFFL0MsT0FBT0E7QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9nb29nbGVEcml2ZS50cz81NzVhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIG1vZHVsZSBmb3IgR29vZ2xlIERyaXZlIGludGVncmF0aW9uXG5cbi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIGdhcGkgYW5kIGdsb2JhbCB3aW5kb3cgb2JqZWN0XG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIGdhcGk6IGFueTtcbiAgICBnb29nbGU6IGFueTtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7IC8vIEFsbG93IGluZGV4aW5nIHdpdGggc3RyaW5nc1xuICB9XG59XG5cbi8vIENoZWNrIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG5jb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblxuLy8gTG9hZCB0aGUgR29vZ2xlIEFQSSBjbGllbnQgbGlicmFyeVxuZXhwb3J0IGNvbnN0IGxvYWRHb29nbGVBcGkgPSAodXNlTWFudWFsQ3JlZGVudGlhbHM/OiBib29sZWFuKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gICAgaWYgKCFpc0Jyb3dzZXIpIHtcbiAgICAgIGNvbnNvbGUud2FybignR29vZ2xlIEFQSSBjYW5ub3QgYmUgbG9hZGVkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQnKTtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0dvb2dsZSBBUEkgcmVxdWlyZXMgYSBicm93c2VyIGVudmlyb25tZW50JykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGUgQVBJIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgaWYgKHdpbmRvdy5nYXBpICYmIHdpbmRvdy5nYXBpLmNsaWVudCAmJiB3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgQVBJIGFscmVhZHkgbG9hZGVkJyk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIGEgZ2xvYmFsIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgc2NyaXB0IGxvYWRzXG4gICAgY29uc3QgY2FsbGJhY2tOYW1lID0gJ2dvb2dsZUFwaUxvYWRlZF8nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcbiAgICB3aW5kb3dbY2FsbGJhY2tOYW1lXSA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgQVBJIHNjcmlwdCBsb2FkZWQgdmlhIGNhbGxiYWNrJyk7XG4gICAgICBpbml0aWFsaXplR29vZ2xlQ2xpZW50KHVzZU1hbnVhbENyZWRlbnRpYWxzLCByZXNvbHZlLCByZWplY3QpO1xuICAgIH07XG5cbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBzY3JpcHQuc3JjID0gYGh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcz9vbmxvYWQ9JHtjYWxsYmFja05hbWV9YDtcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgIHNjcmlwdC5kZWZlciA9IHRydWU7XG4gICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgQVBJIHNjcmlwdCBvbmxvYWQgZXZlbnQgdHJpZ2dlcmVkJyk7XG4gICAgICAvLyBUaGUgY2FsbGJhY2sgd2lsbCBoYW5kbGUgaW5pdGlhbGl6YXRpb25cbiAgICB9O1xuICAgIHNjcmlwdC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIEdvb2dsZSBBUEkgc2NyaXB0OicsIGVycm9yKTtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIEdvb2dsZSBBUEkgc2NyaXB0JykpO1xuICAgIH07XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICB9KTtcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBHb29nbGUgY2xpZW50XG5jb25zdCBpbml0aWFsaXplR29vZ2xlQ2xpZW50ID0gKHVzZU1hbnVhbENyZWRlbnRpYWxzPzogYm9vbGVhbiwgcmVzb2x2ZT86ICh2YWx1ZTogdm9pZCkgPT4gdm9pZCwgcmVqZWN0PzogKHJlYXNvbjogYW55KSA9PiB2b2lkKSA9PiB7XG4gIGlmICghd2luZG93LmdhcGkpIHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignR29vZ2xlIEFQSSAoZ2FwaSkgbm90IGF2YWlsYWJsZSBhZnRlciBsb2FkaW5nJyk7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgcmVqZWN0Py4oZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHdpbmRvdy5nYXBpLmxvYWQoJ2NsaWVudDphdXRoMicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnR29vZ2xlIGNsaWVudCBhbmQgYXV0aDIgbGlicmFyaWVzIGxvYWRlZCcpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgQVBJIGtleSBhbmQgY2xpZW50IElEXG4gICAgICBsZXQgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FQSV9LRVk7XG4gICAgICBsZXQgY2xpZW50SWQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQ0xJRU5UX0lEO1xuICAgICAgXG4gICAgICAvLyBJZiB1c2luZyBtYW51YWwgY3JlZGVudGlhbHMsIHRyeSB0byBnZXQgdGhlbSBmcm9tIHNlc3Npb24gc3RvcmFnZVxuICAgICAgaWYgKHVzZU1hbnVhbENyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IG1hbnVhbEFwaUtleSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ01BTlVBTF9HT09HTEVfQVBJX0tFWScpO1xuICAgICAgICBjb25zdCBtYW51YWxDbGllbnRJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ01BTlVBTF9HT09HTEVfQ0xJRU5UX0lEJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAobWFudWFsQXBpS2V5ICYmIG1hbnVhbENsaWVudElkKSB7XG4gICAgICAgICAgYXBpS2V5ID0gbWFudWFsQXBpS2V5O1xuICAgICAgICAgIGNsaWVudElkID0gbWFudWFsQ2xpZW50SWQ7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIG1hbnVhbGx5IHByb3ZpZGVkIEdvb2dsZSBBUEkgY3JlZGVudGlhbHMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnR29vZ2xlIERyaXZlIEFQSSBDb25maWd1cmF0aW9uOicsIHtcbiAgICAgICAgYXBpS2V5QXZhaWxhYmxlOiAhIWFwaUtleSxcbiAgICAgICAgY2xpZW50SWRBdmFpbGFibGU6ICEhY2xpZW50SWRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoIWFwaUtleSB8fCAhY2xpZW50SWQpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0dvb2dsZSBEcml2ZSBBUEkga2V5cyBub3QgY29uZmlndXJlZCcpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmVqZWN0Py4oZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGNsaWVudCB3aXRoIHlvdXIgY3JlZGVudGlhbHNcbiAgICAgICAgYXdhaXQgd2luZG93LmdhcGkuY2xpZW50LmluaXQoe1xuICAgICAgICAgIGFwaUtleTogYXBpS2V5LFxuICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCxcbiAgICAgICAgICBkaXNjb3ZlcnlEb2NzOiBbJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2Rpc2NvdmVyeS92MS9hcGlzL2RyaXZlL3YzL3Jlc3QnXSxcbiAgICAgICAgICBzY29wZTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUuZmlsZSBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLnJlYWRvbmx5J1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgQVBJIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgcmVzb2x2ZT8uKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBHb29nbGUgQVBJIGNsaWVudDonLCB7XG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvcixcbiAgICAgICAgICBhcGlLZXk6IGFwaUtleSA/ICdQcm92aWRlZCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgY2xpZW50SWQ6IGNsaWVudElkID8gJ1Byb3ZpZGVkJyA6ICdNaXNzaW5nJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmVqZWN0Py4obmV3IEVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBHb29nbGUgQVBJIGNsaWVudDogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY2xpZW50OmF1dGgyIGNhbGxiYWNrOicsIGVycm9yKTtcbiAgICAgIHJlamVjdD8uKG5ldyBFcnJvcihgRXJyb3IgaW4gR29vZ2xlIEFQSSBpbml0aWFsaXphdGlvbjogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZCB3aXRoIEdvb2dsZVxuZXhwb3J0IGNvbnN0IGlzR29vZ2xlQXV0aGVudGljYXRlZCA9ICgpID0+IHtcbiAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gIGlmICghaXNCcm93c2VyKSB7XG4gICAgY29uc29sZS53YXJuKCdHb29nbGUgYXV0aGVudGljYXRpb24gY2hlY2sgcmVxdWlyZXMgYSBicm93c2VyIGVudmlyb25tZW50Jyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBpZiAoIXdpbmRvdy5nYXBpIHx8ICF3aW5kb3cuZ2FwaS5hdXRoMikge1xuICAgIGNvbnNvbGUud2FybignR29vZ2xlIEFQSSBvciBhdXRoMiBub3QgbG9hZGVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IHdpbmRvdy5nYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpO1xuICAgIGlmICghYXV0aEluc3RhbmNlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0dvb2dsZSBBdXRoIGluc3RhbmNlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXNTaWduZWRJbiA9IGF1dGhJbnN0YW5jZS5pc1NpZ25lZEluLmdldCgpO1xuICAgIGNvbnNvbGUubG9nKCdHb29nbGUgYXV0aGVudGljYXRpb24gc3RhdHVzOicsIGlzU2lnbmVkSW4gPyAnQXV0aGVudGljYXRlZCcgOiAnTm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICByZXR1cm4gaXNTaWduZWRJbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBHb29nbGUgYXV0aGVudGljYXRpb246JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gU2lnbiBpbiB3aXRoIEdvb2dsZVxuZXhwb3J0IGNvbnN0IHNpZ25JbldpdGhHb29nbGUgPSBhc3luYyAoKSA9PiB7XG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICBpZiAoIWlzQnJvd3Nlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIHNpZ24taW4gcmVxdWlyZXMgYSBicm93c2VyIGVudmlyb25tZW50Jyk7XG4gIH1cbiAgXG4gIGlmICghd2luZG93LmdhcGkgfHwgIXdpbmRvdy5nYXBpLmF1dGgyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQVBJIG5vdCBsb2FkZWQnKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoSW5zdGFuY2UgPSB3aW5kb3cuZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgICBpZiAoIWF1dGhJbnN0YW5jZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQXV0aCBpbnN0YW5jZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBhdXRoSW5zdGFuY2Uuc2lnbkluKCk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzaWduaW5nIGluIHdpdGggR29vZ2xlOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEdvb2dsZSBzaWduLWluIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgfVxufTtcblxuLy8gU2lnbiBvdXQgZnJvbSBHb29nbGVcbmV4cG9ydCBjb25zdCBzaWduT3V0RnJvbUdvb2dsZSA9IGFzeW5jICgpID0+IHtcbiAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gIGlmICghaXNCcm93c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgc2lnbi1vdXQgcmVxdWlyZXMgYSBicm93c2VyIGVudmlyb25tZW50Jyk7XG4gIH1cbiAgXG4gIGlmICghd2luZG93LmdhcGkgfHwgIXdpbmRvdy5nYXBpLmF1dGgyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQVBJIG5vdCBsb2FkZWQnKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoSW5zdGFuY2UgPSB3aW5kb3cuZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgICBpZiAoIWF1dGhJbnN0YW5jZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQXV0aCBpbnN0YW5jZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBhdXRoSW5zdGFuY2Uuc2lnbk91dCgpO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2lnbmluZyBvdXQgZnJvbSBHb29nbGU6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihgR29vZ2xlIHNpZ24tb3V0IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgfVxufTtcblxuLy8gTGlzdCBHb29nbGUgRHJpdmUgZmlsZXNcbmV4cG9ydCBjb25zdCBsaXN0RHJpdmVGaWxlcyA9IGFzeW5jIChxdWVyeSA9ICcnKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICAgICAgaWYgKCFpc0Jyb3dzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgRHJpdmUgQVBJIHJlcXVpcmVzIGEgYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBHb29nbGUgQVBJIGlzIHByb3Blcmx5IGxvYWRlZFxuICAgICAgaWYgKCF3aW5kb3cuZ2FwaSB8fCAhd2luZG93LmdhcGkuY2xpZW50IHx8ICF3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgRHJpdmUgQVBJIG5vdCBsb2FkZWQnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gICAgICBpZiAoIWlzR29vZ2xlQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgYXV0aGVudGljYXRlZCB3aXRoIEdvb2dsZScpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnTGlzdGluZyBHb29nbGUgRHJpdmUgZmlsZXMgd2l0aCBxdWVyeTonLCBxdWVyeSB8fCAnTm8gcXVlcnknKTtcbiAgICAgIFxuICAgICAgd2luZG93LmdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmxpc3Qoe1xuICAgICAgICBxOiBxdWVyeSxcbiAgICAgICAgZmllbGRzOiAnZmlsZXMoaWQsIG5hbWUsIG1pbWVUeXBlLCBpY29uTGluaywgbW9kaWZpZWRUaW1lLCB3ZWJWaWV3TGluayknLFxuICAgICAgICBvcmRlckJ5OiAnbW9kaWZpZWRUaW1lIGRlc2MnLFxuICAgICAgICBwYWdlU2l6ZTogNTBcbiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0dvb2dsZSBEcml2ZSBmaWxlcyByZXRyaWV2ZWQ6JywgcmVzcG9uc2UucmVzdWx0LmZpbGVzLmxlbmd0aCk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UucmVzdWx0LmZpbGVzKTtcbiAgICAgIH0pLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxpc3RpbmcgR29vZ2xlIERyaXZlIGZpbGVzOicsIGVycm9yKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBsaXN0RHJpdmVGaWxlczonLCBlcnJvcik7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBHZXQgYSBzcGVjaWZpYyBmaWxlIGZyb20gR29vZ2xlIERyaXZlXG5leHBvcnQgY29uc3QgZ2V0RHJpdmVGaWxlID0gYXN5bmMgKGZpbGVJZDogc3RyaW5nKSA9PiB7XG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICBpZiAoIWlzQnJvd3Nlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIERyaXZlIEFQSSByZXF1aXJlcyBhIGJyb3dzZXIgZW52aXJvbm1lbnQnKTtcbiAgfVxuICBcbiAgaWYgKCF3aW5kb3cuZ2FwaSB8fCAhd2luZG93LmdhcGkuY2xpZW50IHx8ICF3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBEcml2ZSBBUEkgbm90IGxvYWRlZCcpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdpbmRvdy5nYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xuICAgICAgZmlsZUlkOiBmaWxlSWQsXG4gICAgICBmaWVsZHM6ICdpZCwgbmFtZSwgbWltZVR5cGUsIGljb25MaW5rLCBtb2RpZmllZFRpbWUsIHdlYlZpZXdMaW5rLCB3ZWJDb250ZW50TGluaydcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2UucmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBEcml2ZSBmaWxlOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgRHJpdmUgZmlsZTogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgfVxufTtcblxuLy8gRG93bmxvYWQgYSBmaWxlIGZyb20gR29vZ2xlIERyaXZlXG5leHBvcnQgY29uc3QgZG93bmxvYWREcml2ZUZpbGUgPSBhc3luYyAoZmlsZUlkOiBzdHJpbmcpID0+IHtcbiAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gYSBicm93c2VyIGVudmlyb25tZW50XG4gIGlmICghaXNCcm93c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgRHJpdmUgQVBJIHJlcXVpcmVzIGEgYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICB9XG4gIFxuICBpZiAoIXdpbmRvdy5nYXBpIHx8ICF3aW5kb3cuZ2FwaS5jbGllbnQgfHwgIXdpbmRvdy5nYXBpLmNsaWVudC5kcml2ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIERyaXZlIEFQSSBub3QgbG9hZGVkJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2luZG93LmdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmdldCh7XG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcbiAgICAgIGFsdDogJ21lZGlhJ1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZXNwb25zZS5ib2R5O1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZG93bmxvYWRpbmcgRHJpdmUgZmlsZTonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZG93bmxvYWQgRHJpdmUgZmlsZTogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgfVxufTtcblxuLy8gQ2hlY2sgaWYgR29vZ2xlIERyaXZlIEFQSSBpcyBwcm9wZXJseSBjb25maWd1cmVkXG5leHBvcnQgY29uc3QgY2hlY2tHb29nbGVEcml2ZUNvbmZpZyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FQSV9LRVk7XG4gIGNvbnN0IGNsaWVudElkID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRDtcbiAgXG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBpZiAoIWFwaUtleSkgZXJyb3JzLnB1c2goJ0FQSSBLZXkgaXMgbWlzc2luZycpO1xuICBpZiAoIWNsaWVudElkKSBlcnJvcnMucHVzaCgnQ2xpZW50IElEIGlzIG1pc3NpbmcnKTtcbiAgXG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICBhcGlLZXk6IGFwaUtleSA/IHRydWUgOiBmYWxzZSxcbiAgICBjbGllbnRJZDogY2xpZW50SWQgPyB0cnVlIDogZmFsc2UsXG4gICAgaXNDb25maWd1cmVkOiAhIShhcGlLZXkgJiYgY2xpZW50SWQpLFxuICAgIGVycm9yczogZXJyb3JzLFxuICAgIGFwaVN0YXR1czoge1xuICAgICAgZ2FwaUxvYWRlZDogaXNCcm93c2VyICYmICEhd2luZG93LmdhcGksXG4gICAgICBjbGllbnRMb2FkZWQ6IGlzQnJvd3NlciAmJiAhIXdpbmRvdy5nYXBpPy5jbGllbnQsXG4gICAgICBhdXRoTG9hZGVkOiBpc0Jyb3dzZXIgJiYgISF3aW5kb3cuZ2FwaT8uYXV0aDIsXG4gICAgICBkcml2ZUxvYWRlZDogaXNCcm93c2VyICYmICEhd2luZG93LmdhcGk/LmNsaWVudD8uZHJpdmVcbiAgICB9XG4gIH07XG4gIFxuICBjb25zb2xlLmxvZygnR29vZ2xlIERyaXZlIEFQSSBjb25maWd1cmF0aW9uOicsIGNvbmZpZyk7XG4gIFxuICByZXR1cm4gY29uZmlnO1xufTsgIl0sIm5hbWVzIjpbImlzQnJvd3NlciIsImxvYWRHb29nbGVBcGkiLCJ1c2VNYW51YWxDcmVkZW50aWFscyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsIndpbmRvdyIsImdhcGkiLCJjbGllbnQiLCJkcml2ZSIsImxvZyIsImNhbGxiYWNrTmFtZSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImluaXRpYWxpemVHb29nbGVDbGllbnQiLCJzY3JpcHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJhc3luYyIsImRlZmVyIiwib25sb2FkIiwib25lcnJvciIsImVycm9yIiwiYm9keSIsImFwcGVuZENoaWxkIiwibG9hZCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19HT09HTEVfQVBJX0tFWSIsImNsaWVudElkIiwiTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRCIsIm1hbnVhbEFwaUtleSIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsIm1hbnVhbENsaWVudElkIiwiYXBpS2V5QXZhaWxhYmxlIiwiY2xpZW50SWRBdmFpbGFibGUiLCJpbml0IiwiZGlzY292ZXJ5RG9jcyIsInNjb3BlIiwibWVzc2FnZSIsImRldGFpbHMiLCJpc0dvb2dsZUF1dGhlbnRpY2F0ZWQiLCJhdXRoMiIsImF1dGhJbnN0YW5jZSIsImdldEF1dGhJbnN0YW5jZSIsImlzU2lnbmVkSW4iLCJnZXQiLCJzaWduSW5XaXRoR29vZ2xlIiwic2lnbkluIiwic2lnbk91dEZyb21Hb29nbGUiLCJzaWduT3V0IiwibGlzdERyaXZlRmlsZXMiLCJxdWVyeSIsImZpbGVzIiwibGlzdCIsInEiLCJmaWVsZHMiLCJvcmRlckJ5IiwicGFnZVNpemUiLCJ0aGVuIiwicmVzcG9uc2UiLCJyZXN1bHQiLCJsZW5ndGgiLCJjYXRjaCIsImdldERyaXZlRmlsZSIsImZpbGVJZCIsImRvd25sb2FkRHJpdmVGaWxlIiwiYWx0IiwiY2hlY2tHb29nbGVEcml2ZUNvbmZpZyIsImVycm9ycyIsInB1c2giLCJjb25maWciLCJpc0NvbmZpZ3VyZWQiLCJhcGlTdGF0dXMiLCJnYXBpTG9hZGVkIiwiY2xpZW50TG9hZGVkIiwiYXV0aExvYWRlZCIsImRyaXZlTG9hZGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/googleDrive.ts\n"));

/***/ })

});