"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/repository/upload/page",{

/***/ "(app-pages-browser)/./lib/googleDrive.ts":
/*!****************************!*\
  !*** ./lib/googleDrive.ts ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkGoogleDriveConfig: function() { return /* binding */ checkGoogleDriveConfig; },\n/* harmony export */   downloadDriveFile: function() { return /* binding */ downloadDriveFile; },\n/* harmony export */   getDriveFile: function() { return /* binding */ getDriveFile; },\n/* harmony export */   isGoogleAuthenticated: function() { return /* binding */ isGoogleAuthenticated; },\n/* harmony export */   listDriveFiles: function() { return /* binding */ listDriveFiles; },\n/* harmony export */   loadGoogleApi: function() { return /* binding */ loadGoogleApi; },\n/* harmony export */   signInWithGoogle: function() { return /* binding */ signInWithGoogle; },\n/* harmony export */   signOutFromGoogle: function() { return /* binding */ signOutFromGoogle; }\n/* harmony export */ });\n// This is a simplified module for Google Drive integration\n// Type definitions for gapi and global window object\n// Load the Google API client library\nconst loadGoogleApi = ()=>{\n    return new Promise((resolve, reject)=>{\n        // Check if the API is already loaded\n        if (window.gapi && window.gapi.client && window.gapi.client.drive) {\n            console.log(\"Google API already loaded\");\n            resolve();\n            return;\n        }\n        const script = document.createElement(\"script\");\n        script.src = \"https://apis.google.com/js/api.js\";\n        script.onload = ()=>{\n            console.log(\"Google API script loaded\");\n            window.gapi.load(\"client:auth2\", ()=>{\n                console.log(\"Google client and auth2 libraries loaded\");\n                // Initialize the client with your credentials\n                window.gapi.client.init({\n                    apiKey: \"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\",\n                    clientId: \"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\",\n                    discoveryDocs: [\n                        \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"\n                    ],\n                    scope: \"https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.readonly\"\n                }).then(()=>{\n                    console.log(\"Google API client initialized successfully\");\n                    resolve();\n                }).catch((error)=>{\n                    console.error(\"Error initializing Google API client:\", {\n                        message: error.message,\n                        details: error,\n                        apiKey:  true ? \"Provided\" : 0,\n                        clientId:  true ? \"Provided\" : 0\n                    });\n                    reject(new Error(\"Failed to initialize Google API client: \".concat(error.message || \"Unknown error\")));\n                });\n            });\n        };\n        script.onerror = (error)=>{\n            console.error(\"Error loading Google API script:\", error);\n            reject(new Error(\"Failed to load Google API script\"));\n        };\n        document.body.appendChild(script);\n    });\n};\n// Check if user is authenticated with Google\nconst isGoogleAuthenticated = ()=>{\n    if (!window.gapi || !window.gapi.auth2) {\n        return false;\n    }\n    const authInstance = window.gapi.auth2.getAuthInstance();\n    return authInstance.isSignedIn.get();\n};\n// Sign in with Google\nconst signInWithGoogle = async ()=>{\n    if (!window.gapi || !window.gapi.auth2) {\n        throw new Error(\"Google API not loaded\");\n    }\n    const authInstance = window.gapi.auth2.getAuthInstance();\n    return await authInstance.signIn();\n};\n// Sign out from Google\nconst signOutFromGoogle = async ()=>{\n    if (!window.gapi || !window.gapi.auth2) {\n        throw new Error(\"Google API not loaded\");\n    }\n    const authInstance = window.gapi.auth2.getAuthInstance();\n    return await authInstance.signOut();\n};\n// List Google Drive files\nconst listDriveFiles = async function() {\n    let query = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"\";\n    return new Promise((resolve, reject)=>{\n        try {\n            // Check if Google API is properly loaded\n            if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n                throw new Error(\"Google Drive API not properly initialized\");\n            }\n            window.gapi.client.drive.files.list({\n                pageSize: 30,\n                fields: \"files(id, name, mimeType, modifiedTime)\",\n                q: query ? \"name contains '\".concat(query, \"' and trashed = false\") : \"trashed = false\",\n                orderBy: \"modifiedTime desc\"\n            }).then((response)=>{\n                resolve(response.result.files);\n            }).catch((error)=>{\n                console.error(\"Google Drive API error details:\", {\n                    message: error.message,\n                    status: error.status,\n                    result: error.result,\n                    stack: error.stack\n                });\n                reject(new Error(\"Google Drive API error: \".concat(error.message || \"Unknown error\")));\n            });\n        } catch (error) {\n            console.error(\"Google Drive operation error:\", error);\n            reject(new Error(\"Failed to list Google Drive files: \".concat(error.message || \"Unknown error\")));\n        }\n    });\n};\n// Get a Google Drive file\nconst getDriveFile = async (fileId)=>{\n    return new Promise((resolve, reject)=>{\n        window.gapi.client.drive.files.get({\n            fileId: fileId,\n            fields: \"id, name, mimeType, modifiedTime, webContentLink\"\n        }).then((response)=>{\n            resolve(response.result);\n        }).catch((error)=>{\n            reject(error);\n        });\n    });\n};\n// Download a Google Drive file\nconst downloadDriveFile = async (fileId)=>{\n    const response = await fetch(\"https://www.googleapis.com/drive/v3/files/\".concat(fileId, \"?alt=media\"), {\n        headers: {\n            Authorization: \"Bearer \".concat(window.gapi.auth.getToken().access_token)\n        }\n    });\n    if (!response.ok) {\n        throw new Error(\"Failed to download file\");\n    }\n    return await response.blob();\n};\n// Diagnostic function to check Google Drive API configuration\nconst checkGoogleDriveConfig = async ()=>{\n    const diagnostics = {\n        configStatus: {},\n        apiStatus: {},\n        errors: [],\n        apiTests: {}\n    };\n    // Check environment variables\n    diagnostics.configStatus.apiKeyProvided = !!\"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\";\n    diagnostics.configStatus.clientIdProvided = !!\"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\";\n    if (!diagnostics.configStatus.apiKeyProvided) {\n        diagnostics.errors.push(\"Google API Key is missing in environment variables\");\n    }\n    if (!diagnostics.configStatus.clientIdProvided) {\n        diagnostics.errors.push(\"Google Client ID is missing in environment variables\");\n    }\n    diagnostics.configStatus.apiKey =  true ? \"\".concat(\"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\".substring(0, 5), \"...\") : 0; // Show only first few characters for security\n    diagnostics.configStatus.clientId =  true ? \"\".concat(\"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\".substring(0, 10), \"...\") : 0;\n    // Check if API is loaded\n    try {\n        diagnostics.apiStatus.gapiLoaded = !!window.gapi;\n        diagnostics.apiStatus.clientLoaded = !!(window.gapi && window.gapi.client);\n        diagnostics.apiStatus.authLoaded = !!(window.gapi && window.gapi.auth2);\n        diagnostics.apiStatus.driveLoaded = !!(window.gapi && window.gapi.client && window.gapi.client.drive);\n        // Check authentication status\n        if (diagnostics.apiStatus.authLoaded) {\n            const authInstance = window.gapi.auth2.getAuthInstance();\n            diagnostics.apiStatus.isSignedIn = authInstance.isSignedIn.get();\n            if (diagnostics.apiStatus.isSignedIn) {\n                const user = authInstance.currentUser.get();\n                const profile = user.getBasicProfile();\n                diagnostics.apiStatus.user = {\n                    id: profile.getId(),\n                    name: profile.getName(),\n                    email: profile.getEmail()\n                };\n                // Check auth token\n                try {\n                    const authToken = window.gapi.auth.getToken();\n                    diagnostics.apiStatus.hasValidToken = !!authToken && !!authToken.access_token;\n                    diagnostics.apiStatus.tokenExpiry = (authToken === null || authToken === void 0 ? void 0 : authToken.expires_at) ? new Date(authToken.expires_at).toISOString() : \"Unknown\";\n                    if (!diagnostics.apiStatus.hasValidToken) {\n                        diagnostics.errors.push(\"No valid Google auth token found\");\n                    }\n                } catch (error) {\n                    diagnostics.errors.push(\"Error checking auth token: \".concat(error.message));\n                }\n                // Check if user has necessary scopes\n                const scopes = user.getGrantedScopes();\n                diagnostics.apiStatus.scopes = scopes;\n                diagnostics.apiStatus.hasFileScope = scopes.includes(\"https://www.googleapis.com/auth/drive.file\");\n                diagnostics.apiStatus.hasReadScope = scopes.includes(\"https://www.googleapis.com/auth/drive.readonly\");\n                if (!diagnostics.apiStatus.hasFileScope || !diagnostics.apiStatus.hasReadScope) {\n                    diagnostics.errors.push(\"Missing required Google Drive scopes. Please disconnect and reconnect\");\n                }\n            } else {\n                diagnostics.errors.push(\"User is not signed in to Google\");\n            }\n        } else {\n            diagnostics.errors.push(\"Google Auth API not loaded\");\n        }\n        if (!diagnostics.apiStatus.driveLoaded) {\n            diagnostics.errors.push(\"Google Drive API not loaded\");\n        }\n        // Test API endpoints if signed in\n        if (diagnostics.apiStatus.isSignedIn && diagnostics.apiStatus.driveLoaded) {\n            try {\n                // Test a simple API call to list files (limit to just 1 file to be efficient)\n                diagnostics.apiTests.testingListFiles = true;\n                const response = await new Promise((resolve, reject)=>{\n                    window.gapi.client.drive.files.list({\n                        pageSize: 1,\n                        fields: \"files(id, name)\"\n                    }).then((response)=>resolve(response), (error)=>reject(error));\n                });\n                diagnostics.apiTests.listFilesSuccess = true;\n                diagnostics.apiTests.listFilesResponse = \"Successfully fetched file list\";\n            } catch (error) {\n                diagnostics.apiTests.listFilesSuccess = false;\n                diagnostics.apiTests.listFilesError = {\n                    message: error.message,\n                    status: error.status,\n                    code: error.code\n                };\n                diagnostics.errors.push(\"API test failed: \".concat(error.message));\n            }\n        }\n    } catch (error) {\n        diagnostics.errors.push(\"Error checking API status: \".concat(error.message));\n    }\n    console.log(\"Google Drive API Diagnostics:\", diagnostics);\n    return diagnostics;\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9nb29nbGVEcml2ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLDJEQUEyRDtBQUUzRCxxREFBcUQ7QUFPckQscUNBQXFDO0FBQzlCLE1BQU1BLGdCQUFnQjtJQUMzQixPQUFPLElBQUlDLFFBQWMsQ0FBQ0MsU0FBU0M7UUFDakMscUNBQXFDO1FBQ3JDLElBQUlDLE9BQU9DLElBQUksSUFBSUQsT0FBT0MsSUFBSSxDQUFDQyxNQUFNLElBQUlGLE9BQU9DLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxLQUFLLEVBQUU7WUFDakVDLFFBQVFDLEdBQUcsQ0FBQztZQUNaUDtZQUNBO1FBQ0Y7UUFFQSxNQUFNUSxTQUFTQyxTQUFTQyxhQUFhLENBQUM7UUFDdENGLE9BQU9HLEdBQUcsR0FBRztRQUNiSCxPQUFPSSxNQUFNLEdBQUc7WUFDZE4sUUFBUUMsR0FBRyxDQUFDO1lBQ1pMLE9BQU9DLElBQUksQ0FBQ1UsSUFBSSxDQUFDLGdCQUFnQjtnQkFDL0JQLFFBQVFDLEdBQUcsQ0FBQztnQkFFWiw4Q0FBOEM7Z0JBQzlDTCxPQUFPQyxJQUFJLENBQUNDLE1BQU0sQ0FBQ1UsSUFBSSxDQUFDO29CQUN0QkMsUUFBUUMseUNBQXNDO29CQUM5Q0csVUFBVUgsMEVBQXdDO29CQUNsREssZUFBZTt3QkFBQztxQkFBNkQ7b0JBQzdFQyxPQUFPO2dCQUNULEdBQUdDLElBQUksQ0FBQztvQkFDTmpCLFFBQVFDLEdBQUcsQ0FBQztvQkFDWlA7Z0JBQ0YsR0FBR3dCLEtBQUssQ0FBQyxDQUFDQztvQkFDUm5CLFFBQVFtQixLQUFLLENBQUMseUNBQXlDO3dCQUNyREMsU0FBU0QsTUFBTUMsT0FBTzt3QkFDdEJDLFNBQVNGO3dCQUNUVixRQUFRQyxLQUFzQyxHQUFHLGFBQWE7d0JBQzlERyxVQUFVSCxLQUF3QyxHQUFHLGFBQWE7b0JBQ3BFO29CQUNBZixPQUFPLElBQUkyQixNQUFNLDJDQUE0RSxPQUFqQ0gsTUFBTUMsT0FBTyxJQUFJO2dCQUMvRTtZQUNGO1FBQ0Y7UUFDQWxCLE9BQU9xQixPQUFPLEdBQUcsQ0FBQ0o7WUFDaEJuQixRQUFRbUIsS0FBSyxDQUFDLG9DQUFvQ0E7WUFDbER4QixPQUFPLElBQUkyQixNQUFNO1FBQ25CO1FBQ0FuQixTQUFTcUIsSUFBSSxDQUFDQyxXQUFXLENBQUN2QjtJQUM1QjtBQUNGLEVBQUU7QUFFRiw2Q0FBNkM7QUFDdEMsTUFBTXdCLHdCQUF3QjtJQUNuQyxJQUFJLENBQUM5QixPQUFPQyxJQUFJLElBQUksQ0FBQ0QsT0FBT0MsSUFBSSxDQUFDOEIsS0FBSyxFQUFFO1FBQ3RDLE9BQU87SUFDVDtJQUVBLE1BQU1DLGVBQWVoQyxPQUFPQyxJQUFJLENBQUM4QixLQUFLLENBQUNFLGVBQWU7SUFDdEQsT0FBT0QsYUFBYUUsVUFBVSxDQUFDQyxHQUFHO0FBQ3BDLEVBQUU7QUFFRixzQkFBc0I7QUFDZixNQUFNQyxtQkFBbUI7SUFDOUIsSUFBSSxDQUFDcEMsT0FBT0MsSUFBSSxJQUFJLENBQUNELE9BQU9DLElBQUksQ0FBQzhCLEtBQUssRUFBRTtRQUN0QyxNQUFNLElBQUlMLE1BQU07SUFDbEI7SUFFQSxNQUFNTSxlQUFlaEMsT0FBT0MsSUFBSSxDQUFDOEIsS0FBSyxDQUFDRSxlQUFlO0lBQ3RELE9BQU8sTUFBTUQsYUFBYUssTUFBTTtBQUNsQyxFQUFFO0FBRUYsdUJBQXVCO0FBQ2hCLE1BQU1DLG9CQUFvQjtJQUMvQixJQUFJLENBQUN0QyxPQUFPQyxJQUFJLElBQUksQ0FBQ0QsT0FBT0MsSUFBSSxDQUFDOEIsS0FBSyxFQUFFO1FBQ3RDLE1BQU0sSUFBSUwsTUFBTTtJQUNsQjtJQUVBLE1BQU1NLGVBQWVoQyxPQUFPQyxJQUFJLENBQUM4QixLQUFLLENBQUNFLGVBQWU7SUFDdEQsT0FBTyxNQUFNRCxhQUFhTyxPQUFPO0FBQ25DLEVBQUU7QUFFRiwwQkFBMEI7QUFDbkIsTUFBTUMsaUJBQWlCO1FBQU9DLHlFQUFRO0lBQzNDLE9BQU8sSUFBSTVDLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDM0IsSUFBSTtZQUNGLHlDQUF5QztZQUN6QyxJQUFJLENBQUNDLE9BQU9DLElBQUksSUFBSSxDQUFDRCxPQUFPQyxJQUFJLENBQUNDLE1BQU0sSUFBSSxDQUFDRixPQUFPQyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsS0FBSyxFQUFFO2dCQUNwRSxNQUFNLElBQUl1QixNQUFNO1lBQ2xCO1lBRUExQixPQUFPQyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDdUMsS0FBSyxDQUFDQyxJQUFJLENBQUM7Z0JBQ2xDQyxVQUFVO2dCQUNWQyxRQUFRO2dCQUNSQyxHQUFHTCxRQUFRLGtCQUF3QixPQUFOQSxPQUFNLDJCQUF5QjtnQkFDNURNLFNBQVM7WUFDWCxHQUFHMUIsSUFBSSxDQUFDLENBQUMyQjtnQkFDUGxELFFBQVFrRCxTQUFTQyxNQUFNLENBQUNQLEtBQUs7WUFDL0IsR0FBR3BCLEtBQUssQ0FBQyxDQUFDQztnQkFDUm5CLFFBQVFtQixLQUFLLENBQUMsbUNBQW1DO29CQUMvQ0MsU0FBU0QsTUFBTUMsT0FBTztvQkFDdEIwQixRQUFRM0IsTUFBTTJCLE1BQU07b0JBQ3BCRCxRQUFRMUIsTUFBTTBCLE1BQU07b0JBQ3BCRSxPQUFPNUIsTUFBTTRCLEtBQUs7Z0JBQ3BCO2dCQUNBcEQsT0FBTyxJQUFJMkIsTUFBTSwyQkFBNEQsT0FBakNILE1BQU1DLE9BQU8sSUFBSTtZQUMvRDtRQUNGLEVBQUUsT0FBT0QsT0FBWTtZQUNuQm5CLFFBQVFtQixLQUFLLENBQUMsaUNBQWlDQTtZQUMvQ3hCLE9BQU8sSUFBSTJCLE1BQU0sc0NBQXVFLE9BQWpDSCxNQUFNQyxPQUFPLElBQUk7UUFDMUU7SUFDRjtBQUNGLEVBQUU7QUFFRiwwQkFBMEI7QUFDbkIsTUFBTTRCLGVBQWUsT0FBT0M7SUFDakMsT0FBTyxJQUFJeEQsUUFBUSxDQUFDQyxTQUFTQztRQUMzQkMsT0FBT0MsSUFBSSxDQUFDQyxNQUFNLENBQUNDLEtBQUssQ0FBQ3VDLEtBQUssQ0FBQ1AsR0FBRyxDQUFDO1lBQ2pDa0IsUUFBUUE7WUFDUlIsUUFBUTtRQUNWLEdBQUd4QixJQUFJLENBQUMsQ0FBQzJCO1lBQ1BsRCxRQUFRa0QsU0FBU0MsTUFBTTtRQUN6QixHQUFHM0IsS0FBSyxDQUFDLENBQUNDO1lBQ1J4QixPQUFPd0I7UUFDVDtJQUNGO0FBQ0YsRUFBRTtBQUVGLCtCQUErQjtBQUN4QixNQUFNK0Isb0JBQW9CLE9BQU9EO0lBQ3RDLE1BQU1MLFdBQVcsTUFBTU8sTUFDckIsNkNBQW9ELE9BQVBGLFFBQU8sZUFDcEQ7UUFDRUcsU0FBUztZQUNQQyxlQUFlLFVBQW1ELE9BQXpDekQsT0FBT0MsSUFBSSxDQUFDeUQsSUFBSSxDQUFDQyxRQUFRLEdBQUdDLFlBQVk7UUFDbkU7SUFDRjtJQUdGLElBQUksQ0FBQ1osU0FBU2EsRUFBRSxFQUFFO1FBQ2hCLE1BQU0sSUFBSW5DLE1BQU07SUFDbEI7SUFFQSxPQUFPLE1BQU1zQixTQUFTYyxJQUFJO0FBQzVCLEVBQUU7QUFFRiw4REFBOEQ7QUFDdkQsTUFBTUMseUJBQXlCO0lBQ3BDLE1BQU1DLGNBQW1DO1FBQ3ZDQyxjQUFjLENBQUM7UUFDZkMsV0FBVyxDQUFDO1FBQ1pDLFFBQVEsRUFBRTtRQUNWQyxVQUFVLENBQUM7SUFDYjtJQUVBLDhCQUE4QjtJQUM5QkosWUFBWUMsWUFBWSxDQUFDSSxjQUFjLEdBQUcsQ0FBQyxDQUFDdkQseUNBQXNDO0lBQ2xGa0QsWUFBWUMsWUFBWSxDQUFDSyxnQkFBZ0IsR0FBRyxDQUFDLENBQUN4RCwwRUFBd0M7SUFFdEYsSUFBSSxDQUFDa0QsWUFBWUMsWUFBWSxDQUFDSSxjQUFjLEVBQUU7UUFDNUNMLFlBQVlHLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDO0lBQzFCO0lBRUEsSUFBSSxDQUFDUCxZQUFZQyxZQUFZLENBQUNLLGdCQUFnQixFQUFFO1FBQzlDTixZQUFZRyxNQUFNLENBQUNJLElBQUksQ0FBQztJQUMxQjtJQUVBUCxZQUFZQyxZQUFZLENBQUNwRCxNQUFNLEdBQUdDLEtBQXNDLEdBQ3BFLEdBQTBELE9BQXZEQSx5Q0FBc0MsQ0FBQzBELFNBQVMsQ0FBQyxHQUFHLElBQUcsU0FDMUQsR0FBVyw4Q0FBOEM7SUFFN0RSLFlBQVlDLFlBQVksQ0FBQ2hELFFBQVEsR0FBR0gsS0FBd0MsR0FDeEUsR0FBNkQsT0FBMURBLDBFQUF3QyxDQUFDMEQsU0FBUyxDQUFDLEdBQUcsS0FBSSxTQUM3RDtJQUVKLHlCQUF5QjtJQUN6QixJQUFJO1FBQ0ZSLFlBQVlFLFNBQVMsQ0FBQ08sVUFBVSxHQUFHLENBQUMsQ0FBQ3pFLE9BQU9DLElBQUk7UUFDaEQrRCxZQUFZRSxTQUFTLENBQUNRLFlBQVksR0FBRyxDQUFDLENBQUUxRSxDQUFBQSxPQUFPQyxJQUFJLElBQUlELE9BQU9DLElBQUksQ0FBQ0MsTUFBTTtRQUN6RThELFlBQVlFLFNBQVMsQ0FBQ1MsVUFBVSxHQUFHLENBQUMsQ0FBRTNFLENBQUFBLE9BQU9DLElBQUksSUFBSUQsT0FBT0MsSUFBSSxDQUFDOEIsS0FBSztRQUN0RWlDLFlBQVlFLFNBQVMsQ0FBQ1UsV0FBVyxHQUFHLENBQUMsQ0FBRTVFLENBQUFBLE9BQU9DLElBQUksSUFBSUQsT0FBT0MsSUFBSSxDQUFDQyxNQUFNLElBQUlGLE9BQU9DLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxLQUFLO1FBRXBHLDhCQUE4QjtRQUM5QixJQUFJNkQsWUFBWUUsU0FBUyxDQUFDUyxVQUFVLEVBQUU7WUFDcEMsTUFBTTNDLGVBQWVoQyxPQUFPQyxJQUFJLENBQUM4QixLQUFLLENBQUNFLGVBQWU7WUFDdEQrQixZQUFZRSxTQUFTLENBQUNoQyxVQUFVLEdBQUdGLGFBQWFFLFVBQVUsQ0FBQ0MsR0FBRztZQUU5RCxJQUFJNkIsWUFBWUUsU0FBUyxDQUFDaEMsVUFBVSxFQUFFO2dCQUNwQyxNQUFNMkMsT0FBTzdDLGFBQWE4QyxXQUFXLENBQUMzQyxHQUFHO2dCQUN6QyxNQUFNNEMsVUFBVUYsS0FBS0csZUFBZTtnQkFDcENoQixZQUFZRSxTQUFTLENBQUNXLElBQUksR0FBRztvQkFDM0JJLElBQUlGLFFBQVFHLEtBQUs7b0JBQ2pCQyxNQUFNSixRQUFRSyxPQUFPO29CQUNyQkMsT0FBT04sUUFBUU8sUUFBUTtnQkFDekI7Z0JBRUEsbUJBQW1CO2dCQUNuQixJQUFJO29CQUNGLE1BQU1DLFlBQVl2RixPQUFPQyxJQUFJLENBQUN5RCxJQUFJLENBQUNDLFFBQVE7b0JBQzNDSyxZQUFZRSxTQUFTLENBQUNzQixhQUFhLEdBQUcsQ0FBQyxDQUFDRCxhQUFhLENBQUMsQ0FBQ0EsVUFBVTNCLFlBQVk7b0JBQzdFSSxZQUFZRSxTQUFTLENBQUN1QixXQUFXLEdBQUdGLENBQUFBLHNCQUFBQSxnQ0FBQUEsVUFBV0csVUFBVSxJQUNyRCxJQUFJQyxLQUFLSixVQUFVRyxVQUFVLEVBQUVFLFdBQVcsS0FDMUM7b0JBRUosSUFBSSxDQUFDNUIsWUFBWUUsU0FBUyxDQUFDc0IsYUFBYSxFQUFFO3dCQUN4Q3hCLFlBQVlHLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDO29CQUMxQjtnQkFDRixFQUFFLE9BQU9oRCxPQUFZO29CQUNuQnlDLFlBQVlHLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLDhCQUE0QyxPQUFkaEQsTUFBTUMsT0FBTztnQkFDckU7Z0JBRUEscUNBQXFDO2dCQUNyQyxNQUFNcUUsU0FBU2hCLEtBQUtpQixnQkFBZ0I7Z0JBQ3BDOUIsWUFBWUUsU0FBUyxDQUFDMkIsTUFBTSxHQUFHQTtnQkFDL0I3QixZQUFZRSxTQUFTLENBQUM2QixZQUFZLEdBQUdGLE9BQU9HLFFBQVEsQ0FBQztnQkFDckRoQyxZQUFZRSxTQUFTLENBQUMrQixZQUFZLEdBQUdKLE9BQU9HLFFBQVEsQ0FBQztnQkFFckQsSUFBSSxDQUFDaEMsWUFBWUUsU0FBUyxDQUFDNkIsWUFBWSxJQUFJLENBQUMvQixZQUFZRSxTQUFTLENBQUMrQixZQUFZLEVBQUU7b0JBQzlFakMsWUFBWUcsTUFBTSxDQUFDSSxJQUFJLENBQUM7Z0JBQzFCO1lBQ0YsT0FBTztnQkFDTFAsWUFBWUcsTUFBTSxDQUFDSSxJQUFJLENBQUM7WUFDMUI7UUFDRixPQUFPO1lBQ0xQLFlBQVlHLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDO1FBQzFCO1FBRUEsSUFBSSxDQUFDUCxZQUFZRSxTQUFTLENBQUNVLFdBQVcsRUFBRTtZQUN0Q1osWUFBWUcsTUFBTSxDQUFDSSxJQUFJLENBQUM7UUFDMUI7UUFFQSxrQ0FBa0M7UUFDbEMsSUFBSVAsWUFBWUUsU0FBUyxDQUFDaEMsVUFBVSxJQUFJOEIsWUFBWUUsU0FBUyxDQUFDVSxXQUFXLEVBQUU7WUFDekUsSUFBSTtnQkFDRiw4RUFBOEU7Z0JBQzlFWixZQUFZSSxRQUFRLENBQUM4QixnQkFBZ0IsR0FBRztnQkFDeEMsTUFBTWxELFdBQVcsTUFBTSxJQUFJbkQsUUFBUSxDQUFDQyxTQUFTQztvQkFDM0NDLE9BQU9DLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxLQUFLLENBQUN1QyxLQUFLLENBQUNDLElBQUksQ0FBQzt3QkFDbENDLFVBQVU7d0JBQ1ZDLFFBQVE7b0JBQ1YsR0FBR3hCLElBQUksQ0FDTCxDQUFDMkIsV0FBa0JsRCxRQUFRa0QsV0FDM0IsQ0FBQ3pCLFFBQWV4QixPQUFPd0I7Z0JBRTNCO2dCQUVBeUMsWUFBWUksUUFBUSxDQUFDK0IsZ0JBQWdCLEdBQUc7Z0JBQ3hDbkMsWUFBWUksUUFBUSxDQUFDZ0MsaUJBQWlCLEdBQUc7WUFDM0MsRUFBRSxPQUFPN0UsT0FBWTtnQkFDbkJ5QyxZQUFZSSxRQUFRLENBQUMrQixnQkFBZ0IsR0FBRztnQkFDeENuQyxZQUFZSSxRQUFRLENBQUNpQyxjQUFjLEdBQUc7b0JBQ3BDN0UsU0FBU0QsTUFBTUMsT0FBTztvQkFDdEIwQixRQUFRM0IsTUFBTTJCLE1BQU07b0JBQ3BCb0QsTUFBTS9FLE1BQU0rRSxJQUFJO2dCQUNsQjtnQkFDQXRDLFlBQVlHLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLG9CQUFrQyxPQUFkaEQsTUFBTUMsT0FBTztZQUMzRDtRQUNGO0lBQ0YsRUFBRSxPQUFPRCxPQUFZO1FBQ25CeUMsWUFBWUcsTUFBTSxDQUFDSSxJQUFJLENBQUMsOEJBQTRDLE9BQWRoRCxNQUFNQyxPQUFPO0lBQ3JFO0lBRUFwQixRQUFRQyxHQUFHLENBQUMsaUNBQWlDMkQ7SUFDN0MsT0FBT0E7QUFDVCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9nb29nbGVEcml2ZS50cz81NzVhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIG1vZHVsZSBmb3IgR29vZ2xlIERyaXZlIGludGVncmF0aW9uXG5cbi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIGdhcGkgYW5kIGdsb2JhbCB3aW5kb3cgb2JqZWN0XG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIGdhcGk6IGFueTtcbiAgfVxufVxuXG4vLyBMb2FkIHRoZSBHb29nbGUgQVBJIGNsaWVudCBsaWJyYXJ5XG5leHBvcnQgY29uc3QgbG9hZEdvb2dsZUFwaSA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAvLyBDaGVjayBpZiB0aGUgQVBJIGlzIGFscmVhZHkgbG9hZGVkXG4gICAgaWYgKHdpbmRvdy5nYXBpICYmIHdpbmRvdy5nYXBpLmNsaWVudCAmJiB3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgQVBJIGFscmVhZHkgbG9hZGVkJyk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanMnO1xuICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnR29vZ2xlIEFQSSBzY3JpcHQgbG9hZGVkJyk7XG4gICAgICB3aW5kb3cuZ2FwaS5sb2FkKCdjbGllbnQ6YXV0aDInLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgY2xpZW50IGFuZCBhdXRoMiBsaWJyYXJpZXMgbG9hZGVkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBjbGllbnQgd2l0aCB5b3VyIGNyZWRlbnRpYWxzXG4gICAgICAgIHdpbmRvdy5nYXBpLmNsaWVudC5pbml0KHtcbiAgICAgICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BUElfS0VZLFxuICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQ0xJRU5UX0lELFxuICAgICAgICAgIGRpc2NvdmVyeURvY3M6IFsnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZHJpdmUvdjMvcmVzdCddLFxuICAgICAgICAgIHNjb3BlOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZS5maWxlIGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUucmVhZG9ubHknXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgQVBJIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIEdvb2dsZSBBUEkgY2xpZW50OicsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBkZXRhaWxzOiBlcnJvcixcbiAgICAgICAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0FQSV9LRVkgPyAnUHJvdmlkZWQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9DTElFTlRfSUQgPyAnUHJvdmlkZWQnIDogJ01pc3NpbmcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgR29vZ2xlIEFQSSBjbGllbnQ6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCkpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgc2NyaXB0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgR29vZ2xlIEFQSSBzY3JpcHQ6JywgZXJyb3IpO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgR29vZ2xlIEFQSSBzY3JpcHQnKSk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gIH0pO1xufTtcblxuLy8gQ2hlY2sgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkIHdpdGggR29vZ2xlXG5leHBvcnQgY29uc3QgaXNHb29nbGVBdXRoZW50aWNhdGVkID0gKCkgPT4ge1xuICBpZiAoIXdpbmRvdy5nYXBpIHx8ICF3aW5kb3cuZ2FwaS5hdXRoMikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgY29uc3QgYXV0aEluc3RhbmNlID0gd2luZG93LmdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCk7XG4gIHJldHVybiBhdXRoSW5zdGFuY2UuaXNTaWduZWRJbi5nZXQoKTtcbn07XG5cbi8vIFNpZ24gaW4gd2l0aCBHb29nbGVcbmV4cG9ydCBjb25zdCBzaWduSW5XaXRoR29vZ2xlID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoIXdpbmRvdy5nYXBpIHx8ICF3aW5kb3cuZ2FwaS5hdXRoMikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIEFQSSBub3QgbG9hZGVkJyk7XG4gIH1cbiAgXG4gIGNvbnN0IGF1dGhJbnN0YW5jZSA9IHdpbmRvdy5nYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpO1xuICByZXR1cm4gYXdhaXQgYXV0aEluc3RhbmNlLnNpZ25JbigpO1xufTtcblxuLy8gU2lnbiBvdXQgZnJvbSBHb29nbGVcbmV4cG9ydCBjb25zdCBzaWduT3V0RnJvbUdvb2dsZSA9IGFzeW5jICgpID0+IHtcbiAgaWYgKCF3aW5kb3cuZ2FwaSB8fCAhd2luZG93LmdhcGkuYXV0aDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBBUEkgbm90IGxvYWRlZCcpO1xuICB9XG4gIFxuICBjb25zdCBhdXRoSW5zdGFuY2UgPSB3aW5kb3cuZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgcmV0dXJuIGF3YWl0IGF1dGhJbnN0YW5jZS5zaWduT3V0KCk7XG59O1xuXG4vLyBMaXN0IEdvb2dsZSBEcml2ZSBmaWxlc1xuZXhwb3J0IGNvbnN0IGxpc3REcml2ZUZpbGVzID0gYXN5bmMgKHF1ZXJ5ID0gJycpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgR29vZ2xlIEFQSSBpcyBwcm9wZXJseSBsb2FkZWRcbiAgICAgIGlmICghd2luZG93LmdhcGkgfHwgIXdpbmRvdy5nYXBpLmNsaWVudCB8fCAhd2luZG93LmdhcGkuY2xpZW50LmRyaXZlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIERyaXZlIEFQSSBub3QgcHJvcGVybHkgaW5pdGlhbGl6ZWQnKTtcbiAgICAgIH1cblxuICAgICAgd2luZG93LmdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmxpc3Qoe1xuICAgICAgICBwYWdlU2l6ZTogMzAsXG4gICAgICAgIGZpZWxkczogJ2ZpbGVzKGlkLCBuYW1lLCBtaW1lVHlwZSwgbW9kaWZpZWRUaW1lKScsXG4gICAgICAgIHE6IHF1ZXJ5ID8gYG5hbWUgY29udGFpbnMgJyR7cXVlcnl9JyBhbmQgdHJhc2hlZCA9IGZhbHNlYCA6ICd0cmFzaGVkID0gZmFsc2UnLFxuICAgICAgICBvcmRlckJ5OiAnbW9kaWZpZWRUaW1lIGRlc2MnXG4gICAgICB9KS50aGVuKChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UucmVzdWx0LmZpbGVzKTtcbiAgICAgIH0pLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBEcml2ZSBBUEkgZXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdGF0dXM6IGVycm9yLnN0YXR1cyxcbiAgICAgICAgICByZXN1bHQ6IGVycm9yLnJlc3VsdCxcbiAgICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICAgICAgfSk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEdvb2dsZSBEcml2ZSBBUEkgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCkpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIERyaXZlIG9wZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gbGlzdCBHb29nbGUgRHJpdmUgZmlsZXM6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBHZXQgYSBHb29nbGUgRHJpdmUgZmlsZVxuZXhwb3J0IGNvbnN0IGdldERyaXZlRmlsZSA9IGFzeW5jIChmaWxlSWQ6IHN0cmluZykgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHdpbmRvdy5nYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xuICAgICAgZmlsZUlkOiBmaWxlSWQsXG4gICAgICBmaWVsZHM6ICdpZCwgbmFtZSwgbWltZVR5cGUsIG1vZGlmaWVkVGltZSwgd2ViQ29udGVudExpbmsnXG4gICAgfSkudGhlbigocmVzcG9uc2U6IGFueSkgPT4ge1xuICAgICAgcmVzb2x2ZShyZXNwb25zZS5yZXN1bHQpO1xuICAgIH0pLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbi8vIERvd25sb2FkIGEgR29vZ2xlIERyaXZlIGZpbGVcbmV4cG9ydCBjb25zdCBkb3dubG9hZERyaXZlRmlsZSA9IGFzeW5jIChmaWxlSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgIGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8ke2ZpbGVJZH0/YWx0PW1lZGlhYCxcbiAgICB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt3aW5kb3cuZ2FwaS5hdXRoLmdldFRva2VuKCkuYWNjZXNzX3Rva2VufWBcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIFxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZG93bmxvYWQgZmlsZScpO1xuICB9XG4gIFxuICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xufTtcblxuLy8gRGlhZ25vc3RpYyBmdW5jdGlvbiB0byBjaGVjayBHb29nbGUgRHJpdmUgQVBJIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBjb25zdCBjaGVja0dvb2dsZURyaXZlQ29uZmlnID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBkaWFnbm9zdGljczogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICBjb25maWdTdGF0dXM6IHt9LFxuICAgIGFwaVN0YXR1czoge30sXG4gICAgZXJyb3JzOiBbXSxcbiAgICBhcGlUZXN0czoge31cbiAgfTtcblxuICAvLyBDaGVjayBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgZGlhZ25vc3RpY3MuY29uZmlnU3RhdHVzLmFwaUtleVByb3ZpZGVkID0gISFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQVBJX0tFWTtcbiAgZGlhZ25vc3RpY3MuY29uZmlnU3RhdHVzLmNsaWVudElkUHJvdmlkZWQgPSAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9DTElFTlRfSUQ7XG4gIFxuICBpZiAoIWRpYWdub3N0aWNzLmNvbmZpZ1N0YXR1cy5hcGlLZXlQcm92aWRlZCkge1xuICAgIGRpYWdub3N0aWNzLmVycm9ycy5wdXNoKCdHb29nbGUgQVBJIEtleSBpcyBtaXNzaW5nIGluIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xuICB9XG4gIFxuICBpZiAoIWRpYWdub3N0aWNzLmNvbmZpZ1N0YXR1cy5jbGllbnRJZFByb3ZpZGVkKSB7XG4gICAgZGlhZ25vc3RpY3MuZXJyb3JzLnB1c2goJ0dvb2dsZSBDbGllbnQgSUQgaXMgbWlzc2luZyBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbiAgfVxuXG4gIGRpYWdub3N0aWNzLmNvbmZpZ1N0YXR1cy5hcGlLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQVBJX0tFWSBcbiAgICA/IGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BUElfS0VZLnN1YnN0cmluZygwLCA1KX0uLi5gIFxuICAgIDogJ01pc3NpbmcnOyAvLyBTaG93IG9ubHkgZmlyc3QgZmV3IGNoYXJhY3RlcnMgZm9yIHNlY3VyaXR5XG4gIFxuICBkaWFnbm9zdGljcy5jb25maWdTdGF0dXMuY2xpZW50SWQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQ0xJRU5UX0lEIFxuICAgID8gYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRC5zdWJzdHJpbmcoMCwgMTApfS4uLmAgXG4gICAgOiAnTWlzc2luZyc7XG5cbiAgLy8gQ2hlY2sgaWYgQVBJIGlzIGxvYWRlZFxuICB0cnkge1xuICAgIGRpYWdub3N0aWNzLmFwaVN0YXR1cy5nYXBpTG9hZGVkID0gISF3aW5kb3cuZ2FwaTtcbiAgICBkaWFnbm9zdGljcy5hcGlTdGF0dXMuY2xpZW50TG9hZGVkID0gISEod2luZG93LmdhcGkgJiYgd2luZG93LmdhcGkuY2xpZW50KTtcbiAgICBkaWFnbm9zdGljcy5hcGlTdGF0dXMuYXV0aExvYWRlZCA9ICEhKHdpbmRvdy5nYXBpICYmIHdpbmRvdy5nYXBpLmF1dGgyKTtcbiAgICBkaWFnbm9zdGljcy5hcGlTdGF0dXMuZHJpdmVMb2FkZWQgPSAhISh3aW5kb3cuZ2FwaSAmJiB3aW5kb3cuZ2FwaS5jbGllbnQgJiYgd2luZG93LmdhcGkuY2xpZW50LmRyaXZlKTtcbiAgICBcbiAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvbiBzdGF0dXNcbiAgICBpZiAoZGlhZ25vc3RpY3MuYXBpU3RhdHVzLmF1dGhMb2FkZWQpIHtcbiAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IHdpbmRvdy5nYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpO1xuICAgICAgZGlhZ25vc3RpY3MuYXBpU3RhdHVzLmlzU2lnbmVkSW4gPSBhdXRoSW5zdGFuY2UuaXNTaWduZWRJbi5nZXQoKTtcbiAgICAgIFxuICAgICAgaWYgKGRpYWdub3N0aWNzLmFwaVN0YXR1cy5pc1NpZ25lZEluKSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhdXRoSW5zdGFuY2UuY3VycmVudFVzZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHByb2ZpbGUgPSB1c2VyLmdldEJhc2ljUHJvZmlsZSgpO1xuICAgICAgICBkaWFnbm9zdGljcy5hcGlTdGF0dXMudXNlciA9IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5nZXRJZCgpLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZ2V0TmFtZSgpLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmdldEVtYWlsKClcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGF1dGggdG9rZW5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBhdXRoVG9rZW4gPSB3aW5kb3cuZ2FwaS5hdXRoLmdldFRva2VuKCk7XG4gICAgICAgICAgZGlhZ25vc3RpY3MuYXBpU3RhdHVzLmhhc1ZhbGlkVG9rZW4gPSAhIWF1dGhUb2tlbiAmJiAhIWF1dGhUb2tlbi5hY2Nlc3NfdG9rZW47XG4gICAgICAgICAgZGlhZ25vc3RpY3MuYXBpU3RhdHVzLnRva2VuRXhwaXJ5ID0gYXV0aFRva2VuPy5leHBpcmVzX2F0IFxuICAgICAgICAgICAgPyBuZXcgRGF0ZShhdXRoVG9rZW4uZXhwaXJlc19hdCkudG9JU09TdHJpbmcoKSBcbiAgICAgICAgICAgIDogJ1Vua25vd24nO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghZGlhZ25vc3RpY3MuYXBpU3RhdHVzLmhhc1ZhbGlkVG9rZW4pIHtcbiAgICAgICAgICAgIGRpYWdub3N0aWNzLmVycm9ycy5wdXNoKCdObyB2YWxpZCBHb29nbGUgYXV0aCB0b2tlbiBmb3VuZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIGRpYWdub3N0aWNzLmVycm9ycy5wdXNoKGBFcnJvciBjaGVja2luZyBhdXRoIHRva2VuOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaGFzIG5lY2Vzc2FyeSBzY29wZXNcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gdXNlci5nZXRHcmFudGVkU2NvcGVzKCk7XG4gICAgICAgIGRpYWdub3N0aWNzLmFwaVN0YXR1cy5zY29wZXMgPSBzY29wZXM7XG4gICAgICAgIGRpYWdub3N0aWNzLmFwaVN0YXR1cy5oYXNGaWxlU2NvcGUgPSBzY29wZXMuaW5jbHVkZXMoJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUuZmlsZScpO1xuICAgICAgICBkaWFnbm9zdGljcy5hcGlTdGF0dXMuaGFzUmVhZFNjb3BlID0gc2NvcGVzLmluY2x1ZGVzKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLnJlYWRvbmx5Jyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRpYWdub3N0aWNzLmFwaVN0YXR1cy5oYXNGaWxlU2NvcGUgfHwgIWRpYWdub3N0aWNzLmFwaVN0YXR1cy5oYXNSZWFkU2NvcGUpIHtcbiAgICAgICAgICBkaWFnbm9zdGljcy5lcnJvcnMucHVzaCgnTWlzc2luZyByZXF1aXJlZCBHb29nbGUgRHJpdmUgc2NvcGVzLiBQbGVhc2UgZGlzY29ubmVjdCBhbmQgcmVjb25uZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpYWdub3N0aWNzLmVycm9ycy5wdXNoKCdVc2VyIGlzIG5vdCBzaWduZWQgaW4gdG8gR29vZ2xlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpYWdub3N0aWNzLmVycm9ycy5wdXNoKCdHb29nbGUgQXV0aCBBUEkgbm90IGxvYWRlZCcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWRpYWdub3N0aWNzLmFwaVN0YXR1cy5kcml2ZUxvYWRlZCkge1xuICAgICAgZGlhZ25vc3RpY3MuZXJyb3JzLnB1c2goJ0dvb2dsZSBEcml2ZSBBUEkgbm90IGxvYWRlZCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUZXN0IEFQSSBlbmRwb2ludHMgaWYgc2lnbmVkIGluXG4gICAgaWYgKGRpYWdub3N0aWNzLmFwaVN0YXR1cy5pc1NpZ25lZEluICYmIGRpYWdub3N0aWNzLmFwaVN0YXR1cy5kcml2ZUxvYWRlZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGVzdCBhIHNpbXBsZSBBUEkgY2FsbCB0byBsaXN0IGZpbGVzIChsaW1pdCB0byBqdXN0IDEgZmlsZSB0byBiZSBlZmZpY2llbnQpXG4gICAgICAgIGRpYWdub3N0aWNzLmFwaVRlc3RzLnRlc3RpbmdMaXN0RmlsZXMgPSB0cnVlO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICB3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMubGlzdCh7XG4gICAgICAgICAgICBwYWdlU2l6ZTogMSxcbiAgICAgICAgICAgIGZpZWxkczogJ2ZpbGVzKGlkLCBuYW1lKSdcbiAgICAgICAgICB9KS50aGVuKFxuICAgICAgICAgICAgKHJlc3BvbnNlOiBhbnkpID0+IHJlc29sdmUocmVzcG9uc2UpLFxuICAgICAgICAgICAgKGVycm9yOiBhbnkpID0+IHJlamVjdChlcnJvcilcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGRpYWdub3N0aWNzLmFwaVRlc3RzLmxpc3RGaWxlc1N1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICBkaWFnbm9zdGljcy5hcGlUZXN0cy5saXN0RmlsZXNSZXNwb25zZSA9ICdTdWNjZXNzZnVsbHkgZmV0Y2hlZCBmaWxlIGxpc3QnO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBkaWFnbm9zdGljcy5hcGlUZXN0cy5saXN0RmlsZXNTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIGRpYWdub3N0aWNzLmFwaVRlc3RzLmxpc3RGaWxlc0Vycm9yID0ge1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgc3RhdHVzOiBlcnJvci5zdGF0dXMsXG4gICAgICAgICAgY29kZTogZXJyb3IuY29kZVxuICAgICAgICB9O1xuICAgICAgICBkaWFnbm9zdGljcy5lcnJvcnMucHVzaChgQVBJIHRlc3QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgZGlhZ25vc3RpY3MuZXJyb3JzLnB1c2goYEVycm9yIGNoZWNraW5nIEFQSSBzdGF0dXM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ0dvb2dsZSBEcml2ZSBBUEkgRGlhZ25vc3RpY3M6JywgZGlhZ25vc3RpY3MpO1xuICByZXR1cm4gZGlhZ25vc3RpY3M7XG59OyAiXSwibmFtZXMiOlsibG9hZEdvb2dsZUFwaSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwid2luZG93IiwiZ2FwaSIsImNsaWVudCIsImRyaXZlIiwiY29uc29sZSIsImxvZyIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsIm9ubG9hZCIsImxvYWQiLCJpbml0IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0dPT0dMRV9BUElfS0VZIiwiY2xpZW50SWQiLCJORVhUX1BVQkxJQ19HT09HTEVfQ0xJRU5UX0lEIiwiZGlzY292ZXJ5RG9jcyIsInNjb3BlIiwidGhlbiIsImNhdGNoIiwiZXJyb3IiLCJtZXNzYWdlIiwiZGV0YWlscyIsIkVycm9yIiwib25lcnJvciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImlzR29vZ2xlQXV0aGVudGljYXRlZCIsImF1dGgyIiwiYXV0aEluc3RhbmNlIiwiZ2V0QXV0aEluc3RhbmNlIiwiaXNTaWduZWRJbiIsImdldCIsInNpZ25JbldpdGhHb29nbGUiLCJzaWduSW4iLCJzaWduT3V0RnJvbUdvb2dsZSIsInNpZ25PdXQiLCJsaXN0RHJpdmVGaWxlcyIsInF1ZXJ5IiwiZmlsZXMiLCJsaXN0IiwicGFnZVNpemUiLCJmaWVsZHMiLCJxIiwib3JkZXJCeSIsInJlc3BvbnNlIiwicmVzdWx0Iiwic3RhdHVzIiwic3RhY2siLCJnZXREcml2ZUZpbGUiLCJmaWxlSWQiLCJkb3dubG9hZERyaXZlRmlsZSIsImZldGNoIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJhdXRoIiwiZ2V0VG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJvayIsImJsb2IiLCJjaGVja0dvb2dsZURyaXZlQ29uZmlnIiwiZGlhZ25vc3RpY3MiLCJjb25maWdTdGF0dXMiLCJhcGlTdGF0dXMiLCJlcnJvcnMiLCJhcGlUZXN0cyIsImFwaUtleVByb3ZpZGVkIiwiY2xpZW50SWRQcm92aWRlZCIsInB1c2giLCJzdWJzdHJpbmciLCJnYXBpTG9hZGVkIiwiY2xpZW50TG9hZGVkIiwiYXV0aExvYWRlZCIsImRyaXZlTG9hZGVkIiwidXNlciIsImN1cnJlbnRVc2VyIiwicHJvZmlsZSIsImdldEJhc2ljUHJvZmlsZSIsImlkIiwiZ2V0SWQiLCJuYW1lIiwiZ2V0TmFtZSIsImVtYWlsIiwiZ2V0RW1haWwiLCJhdXRoVG9rZW4iLCJoYXNWYWxpZFRva2VuIiwidG9rZW5FeHBpcnkiLCJleHBpcmVzX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2NvcGVzIiwiZ2V0R3JhbnRlZFNjb3BlcyIsImhhc0ZpbGVTY29wZSIsImluY2x1ZGVzIiwiaGFzUmVhZFNjb3BlIiwidGVzdGluZ0xpc3RGaWxlcyIsImxpc3RGaWxlc1N1Y2Nlc3MiLCJsaXN0RmlsZXNSZXNwb25zZSIsImxpc3RGaWxlc0Vycm9yIiwiY29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/googleDrive.ts\n"));

/***/ })

});