"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/repository/page",{

/***/ "(app-pages-browser)/./lib/googleDrive.ts":
/*!****************************!*\
  !*** ./lib/googleDrive.ts ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkGoogleDriveConfig: function() { return /* binding */ checkGoogleDriveConfig; },\n/* harmony export */   downloadDriveFile: function() { return /* binding */ downloadDriveFile; },\n/* harmony export */   getDriveFile: function() { return /* binding */ getDriveFile; },\n/* harmony export */   isGoogleAuthenticated: function() { return /* binding */ isGoogleAuthenticated; },\n/* harmony export */   listDriveFiles: function() { return /* binding */ listDriveFiles; },\n/* harmony export */   loadGoogleApi: function() { return /* binding */ loadGoogleApi; },\n/* harmony export */   signInWithGoogle: function() { return /* binding */ signInWithGoogle; },\n/* harmony export */   signOutFromGoogle: function() { return /* binding */ signOutFromGoogle; }\n/* harmony export */ });\n// This is a simplified module for Google Drive integration\n// Type definitions for gapi and global window object\n// Check if we're running in a browser environment\nconst isBrowser = \"object\" !== \"undefined\";\n// Load the Google API client library\nconst loadGoogleApi = (useManualCredentials)=>{\n    return new Promise((resolve, reject)=>{\n        // Check if we're in a browser environment\n        if (!isBrowser) {\n            console.warn(\"Google API cannot be loaded in a non-browser environment\");\n            reject(new Error(\"Google API requires a browser environment\"));\n            return;\n        }\n        // Check if the API is already loaded\n        if (window.gapi && window.gapi.client && window.gapi.client.drive) {\n            console.log(\"Google API already loaded\");\n            resolve();\n            return;\n        }\n        // Define a global callback that will be called when the script loads\n        const callbackName = \"googleApiLoaded_\" + Math.random().toString(36).substring(2, 15);\n        window[callbackName] = ()=>{\n            console.log(\"Google API script loaded via callback\");\n            initializeGoogleClient(useManualCredentials, resolve, reject);\n        };\n        const script = document.createElement(\"script\");\n        script.src = \"https://apis.google.com/js/api.js?onload=\".concat(callbackName);\n        script.async = true;\n        script.defer = true;\n        script.onload = ()=>{\n            console.log(\"Google API script onload event triggered\");\n        // The callback will handle initialization\n        };\n        script.onerror = (error)=>{\n            console.error(\"Error loading Google API script:\", error);\n            reject(new Error(\"Failed to load Google API script\"));\n        };\n        document.body.appendChild(script);\n    });\n};\n// Helper function to initialize the Google client\nconst initializeGoogleClient = (useManualCredentials, resolve, reject)=>{\n    if (!window.gapi) {\n        const error = new Error(\"Google API (gapi) not available after loading\");\n        console.error(error);\n        reject === null || reject === void 0 ? void 0 : reject(error);\n        return;\n    }\n    window.gapi.load(\"client:auth2\", async ()=>{\n        console.log(\"Google client and auth2 libraries loaded\");\n        try {\n            // Get API key and client ID\n            let apiKey = \"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\";\n            let clientId = \"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\";\n            // If using manual credentials, try to get them from session storage\n            if (useManualCredentials) {\n                const manualApiKey = sessionStorage.getItem(\"MANUAL_GOOGLE_API_KEY\");\n                const manualClientId = sessionStorage.getItem(\"MANUAL_GOOGLE_CLIENT_ID\");\n                if (manualApiKey && manualClientId) {\n                    apiKey = manualApiKey;\n                    clientId = manualClientId;\n                    console.log(\"Using manually provided Google API credentials\");\n                }\n            }\n            console.log(\"Google Drive API Configuration:\", {\n                apiKeyAvailable: !!apiKey,\n                clientIdAvailable: !!clientId\n            });\n            if (!apiKey || !clientId) {\n                const error = new Error(\"Google Drive API keys not configured\");\n                console.error(error);\n                reject === null || reject === void 0 ? void 0 : reject(error);\n                return;\n            }\n            try {\n                // Initialize the client with your credentials\n                await window.gapi.client.init({\n                    apiKey: apiKey,\n                    clientId: clientId,\n                    discoveryDocs: [\n                        \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"\n                    ],\n                    scope: \"https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.readonly\"\n                });\n                console.log(\"Google API client initialized successfully\");\n                resolve === null || resolve === void 0 ? void 0 : resolve();\n            } catch (error) {\n                console.error(\"Error initializing Google API client:\", {\n                    message: error.message,\n                    details: error,\n                    apiKey: apiKey ? \"Provided\" : \"Missing\",\n                    clientId: clientId ? \"Provided\" : \"Missing\"\n                });\n                reject === null || reject === void 0 ? void 0 : reject(new Error(\"Failed to initialize Google API client: \".concat(error.message || \"Unknown error\")));\n            }\n        } catch (error) {\n            console.error(\"Error in client:auth2 callback:\", error);\n            reject === null || reject === void 0 ? void 0 : reject(new Error(\"Error in Google API initialization: \".concat(error.message || \"Unknown error\")));\n        }\n    });\n};\n// Check if user is authenticated with Google\nconst isGoogleAuthenticated = ()=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        console.warn(\"Google authentication check requires a browser environment\");\n        return false;\n    }\n    if (!window.gapi || !window.gapi.auth2) {\n        console.warn(\"Google API or auth2 not loaded\");\n        return false;\n    }\n    try {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        if (!authInstance) {\n            console.warn(\"Google Auth instance not available\");\n            return false;\n        }\n        const isSignedIn = authInstance.isSignedIn.get();\n        console.log(\"Google authentication status:\", isSignedIn ? \"Authenticated\" : \"Not authenticated\");\n        return isSignedIn;\n    } catch (error) {\n        console.error(\"Error checking Google authentication:\", error);\n        return false;\n    }\n};\n// Sign in with Google\nconst signInWithGoogle = async ()=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google sign-in requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.auth2) {\n        throw new Error(\"Google API not loaded\");\n    }\n    try {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        if (!authInstance) {\n            throw new Error(\"Google Auth instance not available\");\n        }\n        return await authInstance.signIn();\n    } catch (error) {\n        console.error(\"Error signing in with Google:\", error);\n        throw new Error(\"Google sign-in failed: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// Sign out from Google\nconst signOutFromGoogle = async ()=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google sign-out requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.auth2) {\n        throw new Error(\"Google API not loaded\");\n    }\n    try {\n        const authInstance = window.gapi.auth2.getAuthInstance();\n        if (!authInstance) {\n            throw new Error(\"Google Auth instance not available\");\n        }\n        return await authInstance.signOut();\n    } catch (error) {\n        console.error(\"Error signing out from Google:\", error);\n        throw new Error(\"Google sign-out failed: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// List Google Drive files\nconst listDriveFiles = async function() {\n    let query = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"\";\n    return new Promise((resolve, reject)=>{\n        try {\n            // Check if we're in a browser environment\n            if (!isBrowser) {\n                throw new Error(\"Google Drive API requires a browser environment\");\n            }\n            // Check if Google API is properly loaded\n            if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n                throw new Error(\"Google Drive API not loaded\");\n            }\n            // Check if user is authenticated\n            if (!isGoogleAuthenticated()) {\n                throw new Error(\"User not authenticated with Google\");\n            }\n            console.log(\"Listing Google Drive files with query:\", query || \"No query\");\n            window.gapi.client.drive.files.list({\n                q: query,\n                fields: \"files(id, name, mimeType, iconLink, modifiedTime, webViewLink)\",\n                orderBy: \"modifiedTime desc\",\n                pageSize: 50\n            }).then((response)=>{\n                console.log(\"Google Drive files retrieved:\", response.result.files.length);\n                resolve(response.result.files);\n            }).catch((error)=>{\n                console.error(\"Error listing Google Drive files:\", error);\n                reject(error);\n            });\n        } catch (error) {\n            console.error(\"Error in listDriveFiles:\", error);\n            reject(error);\n        }\n    });\n};\n// Get a specific file from Google Drive\nconst getDriveFile = async (fileId)=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google Drive API requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n        throw new Error(\"Google Drive API not loaded\");\n    }\n    try {\n        const response = await window.gapi.client.drive.files.get({\n            fileId: fileId,\n            fields: \"id, name, mimeType, iconLink, modifiedTime, webViewLink, webContentLink\"\n        });\n        return response.result;\n    } catch (error) {\n        console.error(\"Error getting Drive file:\", error);\n        throw new Error(\"Failed to get Drive file: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// Download a file from Google Drive\nconst downloadDriveFile = async (fileId)=>{\n    // Check if we're in a browser environment\n    if (!isBrowser) {\n        throw new Error(\"Google Drive API requires a browser environment\");\n    }\n    if (!window.gapi || !window.gapi.client || !window.gapi.client.drive) {\n        throw new Error(\"Google Drive API not loaded\");\n    }\n    try {\n        const response = await window.gapi.client.drive.files.get({\n            fileId: fileId,\n            alt: \"media\"\n        });\n        return response.body;\n    } catch (error) {\n        console.error(\"Error downloading Drive file:\", error);\n        throw new Error(\"Failed to download Drive file: \".concat(error.message || \"Unknown error\"));\n    }\n};\n// Check if Google Drive API is properly configured\nconst checkGoogleDriveConfig = async ()=>{\n    var _window_gapi, _window_gapi1, _window_gapi_client, _window_gapi2;\n    const apiKey = \"AIzaSyB-pZ0FV758VUs_pIZ0Ck2iq5Wx0FDJCxw\";\n    const clientId = \"913358736520-5biusol4f5ead6t86d7rv94rd0ar3gkn.apps.googleusercontent.com\";\n    const errors = [];\n    if (!apiKey) errors.push(\"API Key is missing\");\n    if (!clientId) errors.push(\"Client ID is missing\");\n    const config = {\n        apiKey: apiKey ? true : false,\n        clientId: clientId ? true : false,\n        isConfigured: !!(apiKey && clientId),\n        errors: errors,\n        apiStatus: {\n            gapiLoaded: isBrowser && !!window.gapi,\n            clientLoaded: isBrowser && !!((_window_gapi = window.gapi) === null || _window_gapi === void 0 ? void 0 : _window_gapi.client),\n            authLoaded: isBrowser && !!((_window_gapi1 = window.gapi) === null || _window_gapi1 === void 0 ? void 0 : _window_gapi1.auth2),\n            driveLoaded: isBrowser && !!((_window_gapi2 = window.gapi) === null || _window_gapi2 === void 0 ? void 0 : (_window_gapi_client = _window_gapi2.client) === null || _window_gapi_client === void 0 ? void 0 : _window_gapi_client.drive)\n        }\n    };\n    console.log(\"Google Drive API configuration:\", config);\n    return config;\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQVk7UUFDbkJ0QixRQUFRc0IsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsTUFBTSxJQUFJcEIsTUFBTSxrQ0FBbUUsT0FBakNvQixNQUFNbUIsT0FBTyxJQUFJO0lBQ3JFO0FBQ0YsRUFBRTtBQUVGLG1EQUFtRDtBQUM1QyxNQUFNNkIseUJBQXlCO1FBZUhuRSxjQUNGQSxlQUNDQSxxQkFBQUE7SUFoQmhDLE1BQU11QixTQUFTQyx5Q0FBc0M7SUFDckQsTUFBTUcsV0FBV0gsMEVBQXdDO0lBRXpELE1BQU00QyxTQUFTLEVBQUU7SUFDakIsSUFBSSxDQUFDN0MsUUFBUTZDLE9BQU9DLElBQUksQ0FBQztJQUN6QixJQUFJLENBQUMxQyxVQUFVeUMsT0FBT0MsSUFBSSxDQUFDO0lBRTNCLE1BQU1DLFNBQVM7UUFDYi9DLFFBQVFBLFNBQVMsT0FBTztRQUN4QkksVUFBVUEsV0FBVyxPQUFPO1FBQzVCNEMsY0FBYyxDQUFDLENBQUVoRCxDQUFBQSxVQUFVSSxRQUFPO1FBQ2xDeUMsUUFBUUE7UUFDUkksV0FBVztZQUNUQyxZQUFZbEYsYUFBYSxDQUFDLENBQUNTLE9BQU9DLElBQUk7WUFDdEN5RSxjQUFjbkYsYUFBYSxDQUFDLEdBQUNTLGVBQUFBLE9BQU9DLElBQUksY0FBWEQsbUNBQUFBLGFBQWFFLE1BQU07WUFDaER5RSxZQUFZcEYsYUFBYSxDQUFDLEdBQUNTLGdCQUFBQSxPQUFPQyxJQUFJLGNBQVhELG9DQUFBQSxjQUFheUMsS0FBSztZQUM3Q21DLGFBQWFyRixhQUFhLENBQUMsR0FBQ1MsZ0JBQUFBLE9BQU9DLElBQUksY0FBWEQscUNBQUFBLHNCQUFBQSxjQUFhRSxNQUFNLGNBQW5CRiwwQ0FBQUEsb0JBQXFCRyxLQUFLO1FBQ3hEO0lBQ0Y7SUFFQU4sUUFBUU8sR0FBRyxDQUFDLG1DQUFtQ2tFO0lBRS9DLE9BQU9BO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvZ29vZ2xlRHJpdmUudHM/NTc1YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCBtb2R1bGUgZm9yIEdvb2dsZSBEcml2ZSBpbnRlZ3JhdGlvblxuXG4vLyBUeXBlIGRlZmluaXRpb25zIGZvciBnYXBpIGFuZCBnbG9iYWwgd2luZG93IG9iamVjdFxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBnYXBpOiBhbnk7XG4gICAgZ29vZ2xlOiBhbnk7XG4gIH1cbn1cblxuLy8gQ2hlY2sgaWYgd2UncmUgcnVubmluZyBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbmNvbnN0IGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBMb2FkIHRoZSBHb29nbGUgQVBJIGNsaWVudCBsaWJyYXJ5XG5leHBvcnQgY29uc3QgbG9hZEdvb2dsZUFwaSA9ICh1c2VNYW51YWxDcmVkZW50aWFscz86IGJvb2xlYW4pID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAgICBpZiAoIWlzQnJvd3Nlcikge1xuICAgICAgY29uc29sZS53YXJuKCdHb29nbGUgQVBJIGNhbm5vdCBiZSBsb2FkZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignR29vZ2xlIEFQSSByZXF1aXJlcyBhIGJyb3dzZXIgZW52aXJvbm1lbnQnKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoZSBBUEkgaXMgYWxyZWFkeSBsb2FkZWRcbiAgICBpZiAod2luZG93LmdhcGkgJiYgd2luZG93LmdhcGkuY2xpZW50ICYmIHdpbmRvdy5nYXBpLmNsaWVudC5kcml2ZSkge1xuICAgICAgY29uc29sZS5sb2coJ0dvb2dsZSBBUEkgYWxyZWFkeSBsb2FkZWQnKTtcbiAgICAgIHJlc29sdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgYSBnbG9iYWwgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBzY3JpcHQgbG9hZHNcbiAgICBjb25zdCBjYWxsYmFja05hbWUgPSAnZ29vZ2xlQXBpTG9hZGVkXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xuICAgIHdpbmRvd1tjYWxsYmFja05hbWUgYXMga2V5b2YgdHlwZW9mIHdpbmRvd10gPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnR29vZ2xlIEFQSSBzY3JpcHQgbG9hZGVkIHZpYSBjYWxsYmFjaycpO1xuICAgICAgaW5pdGlhbGl6ZUdvb2dsZUNsaWVudCh1c2VNYW51YWxDcmVkZW50aWFscywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9IGBodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanM/b25sb2FkPSR7Y2FsbGJhY2tOYW1lfWA7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICBzY3JpcHQuZGVmZXIgPSB0cnVlO1xuICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnR29vZ2xlIEFQSSBzY3JpcHQgb25sb2FkIGV2ZW50IHRyaWdnZXJlZCcpO1xuICAgICAgLy8gVGhlIGNhbGxiYWNrIHdpbGwgaGFuZGxlIGluaXRpYWxpemF0aW9uXG4gICAgfTtcbiAgICBzY3JpcHQub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBHb29nbGUgQVBJIHNjcmlwdDonLCBlcnJvcik7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBHb29nbGUgQVBJIHNjcmlwdCcpKTtcbiAgICB9O1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgfSk7XG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgR29vZ2xlIGNsaWVudFxuY29uc3QgaW5pdGlhbGl6ZUdvb2dsZUNsaWVudCA9ICh1c2VNYW51YWxDcmVkZW50aWFscz86IGJvb2xlYW4sIHJlc29sdmU/OiAodmFsdWU6IHZvaWQpID0+IHZvaWQsIHJlamVjdD86IChyZWFzb246IGFueSkgPT4gdm9pZCkgPT4ge1xuICBpZiAoIXdpbmRvdy5nYXBpKSB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0dvb2dsZSBBUEkgKGdhcGkpIG5vdCBhdmFpbGFibGUgYWZ0ZXIgbG9hZGluZycpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHJlamVjdD8uKGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB3aW5kb3cuZ2FwaS5sb2FkKCdjbGllbnQ6YXV0aDInLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0dvb2dsZSBjbGllbnQgYW5kIGF1dGgyIGxpYnJhcmllcyBsb2FkZWQnKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IEFQSSBrZXkgYW5kIGNsaWVudCBJRFxuICAgICAgbGV0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BUElfS0VZO1xuICAgICAgbGV0IGNsaWVudElkID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRDtcbiAgICAgIFxuICAgICAgLy8gSWYgdXNpbmcgbWFudWFsIGNyZWRlbnRpYWxzLCB0cnkgdG8gZ2V0IHRoZW0gZnJvbSBzZXNzaW9uIHN0b3JhZ2VcbiAgICAgIGlmICh1c2VNYW51YWxDcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCBtYW51YWxBcGlLZXkgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdNQU5VQUxfR09PR0xFX0FQSV9LRVknKTtcbiAgICAgICAgY29uc3QgbWFudWFsQ2xpZW50SWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdNQU5VQUxfR09PR0xFX0NMSUVOVF9JRCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1hbnVhbEFwaUtleSAmJiBtYW51YWxDbGllbnRJZCkge1xuICAgICAgICAgIGFwaUtleSA9IG1hbnVhbEFwaUtleTtcbiAgICAgICAgICBjbGllbnRJZCA9IG1hbnVhbENsaWVudElkO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBtYW51YWxseSBwcm92aWRlZCBHb29nbGUgQVBJIGNyZWRlbnRpYWxzJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0dvb2dsZSBEcml2ZSBBUEkgQ29uZmlndXJhdGlvbjonLCB7XG4gICAgICAgIGFwaUtleUF2YWlsYWJsZTogISFhcGlLZXksXG4gICAgICAgIGNsaWVudElkQXZhaWxhYmxlOiAhIWNsaWVudElkXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFhcGlLZXkgfHwgIWNsaWVudElkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdHb29nbGUgRHJpdmUgQVBJIGtleXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJlamVjdD8uKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBjbGllbnQgd2l0aCB5b3VyIGNyZWRlbnRpYWxzXG4gICAgICAgIGF3YWl0IHdpbmRvdy5nYXBpLmNsaWVudC5pbml0KHtcbiAgICAgICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICAgICAgICBjbGllbnRJZDogY2xpZW50SWQsXG4gICAgICAgICAgZGlzY292ZXJ5RG9jczogWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kaXNjb3ZlcnkvdjEvYXBpcy9kcml2ZS92My9yZXN0J10sXG4gICAgICAgICAgc2NvcGU6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLmZpbGUgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZS5yZWFkb25seSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnR29vZ2xlIEFQSSBjbGllbnQgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIHJlc29sdmU/LigpO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgR29vZ2xlIEFQSSBjbGllbnQ6Jywge1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IsXG4gICAgICAgICAgYXBpS2V5OiBhcGlLZXkgPyAnUHJvdmlkZWQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGNsaWVudElkOiBjbGllbnRJZCA/ICdQcm92aWRlZCcgOiAnTWlzc2luZydcbiAgICAgICAgfSk7XG4gICAgICAgIHJlamVjdD8uKG5ldyBFcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgR29vZ2xlIEFQSSBjbGllbnQ6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNsaWVudDphdXRoMiBjYWxsYmFjazonLCBlcnJvcik7XG4gICAgICByZWplY3Q/LihuZXcgRXJyb3IoYEVycm9yIGluIEdvb2dsZSBBUEkgaW5pdGlhbGl6YXRpb246ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBDaGVjayBpZiB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgd2l0aCBHb29nbGVcbmV4cG9ydCBjb25zdCBpc0dvb2dsZUF1dGhlbnRpY2F0ZWQgPSAoKSA9PiB7XG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICBpZiAoIWlzQnJvd3Nlcikge1xuICAgIGNvbnNvbGUud2FybignR29vZ2xlIGF1dGhlbnRpY2F0aW9uIGNoZWNrIHJlcXVpcmVzIGEgYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgaWYgKCF3aW5kb3cuZ2FwaSB8fCAhd2luZG93LmdhcGkuYXV0aDIpIHtcbiAgICBjb25zb2xlLndhcm4oJ0dvb2dsZSBBUEkgb3IgYXV0aDIgbm90IGxvYWRlZCcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRoSW5zdGFuY2UgPSB3aW5kb3cuZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKTtcbiAgICBpZiAoIWF1dGhJbnN0YW5jZSkge1xuICAgICAgY29uc29sZS53YXJuKCdHb29nbGUgQXV0aCBpbnN0YW5jZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlzU2lnbmVkSW4gPSBhdXRoSW5zdGFuY2UuaXNTaWduZWRJbi5nZXQoKTtcbiAgICBjb25zb2xlLmxvZygnR29vZ2xlIGF1dGhlbnRpY2F0aW9uIHN0YXR1czonLCBpc1NpZ25lZEluID8gJ0F1dGhlbnRpY2F0ZWQnIDogJ05vdCBhdXRoZW50aWNhdGVkJyk7XG4gICAgcmV0dXJuIGlzU2lnbmVkSW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgR29vZ2xlIGF1dGhlbnRpY2F0aW9uOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbi8vIFNpZ24gaW4gd2l0aCBHb29nbGVcbmV4cG9ydCBjb25zdCBzaWduSW5XaXRoR29vZ2xlID0gYXN5bmMgKCkgPT4ge1xuICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAgaWYgKCFpc0Jyb3dzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBzaWduLWluIHJlcXVpcmVzIGEgYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICB9XG4gIFxuICBpZiAoIXdpbmRvdy5nYXBpIHx8ICF3aW5kb3cuZ2FwaS5hdXRoMikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIEFQSSBub3QgbG9hZGVkJyk7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEluc3RhbmNlID0gd2luZG93LmdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCk7XG4gICAgaWYgKCFhdXRoSW5zdGFuY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIEF1dGggaW5zdGFuY2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgYXV0aEluc3RhbmNlLnNpZ25JbigpO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2lnbmluZyBpbiB3aXRoIEdvb2dsZTonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBHb29nbGUgc2lnbi1pbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XG4gIH1cbn07XG5cbi8vIFNpZ24gb3V0IGZyb20gR29vZ2xlXG5leHBvcnQgY29uc3Qgc2lnbk91dEZyb21Hb29nbGUgPSBhc3luYyAoKSA9PiB7XG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICBpZiAoIWlzQnJvd3Nlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIHNpZ24tb3V0IHJlcXVpcmVzIGEgYnJvd3NlciBlbnZpcm9ubWVudCcpO1xuICB9XG4gIFxuICBpZiAoIXdpbmRvdy5nYXBpIHx8ICF3aW5kb3cuZ2FwaS5hdXRoMikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIEFQSSBub3QgbG9hZGVkJyk7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEluc3RhbmNlID0gd2luZG93LmdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCk7XG4gICAgaWYgKCFhdXRoSW5zdGFuY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIEF1dGggaW5zdGFuY2Ugbm90IGF2YWlsYWJsZScpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgYXV0aEluc3RhbmNlLnNpZ25PdXQoKTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNpZ25pbmcgb3V0IGZyb20gR29vZ2xlOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEdvb2dsZSBzaWduLW91dCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XG4gIH1cbn07XG5cbi8vIExpc3QgR29vZ2xlIERyaXZlIGZpbGVzXG5leHBvcnQgY29uc3QgbGlzdERyaXZlRmlsZXMgPSBhc3luYyAocXVlcnkgPSAnJykgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAgICAgIGlmICghaXNCcm93c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIERyaXZlIEFQSSByZXF1aXJlcyBhIGJyb3dzZXIgZW52aXJvbm1lbnQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgR29vZ2xlIEFQSSBpcyBwcm9wZXJseSBsb2FkZWRcbiAgICAgIGlmICghd2luZG93LmdhcGkgfHwgIXdpbmRvdy5nYXBpLmNsaWVudCB8fCAhd2luZG93LmdhcGkuY2xpZW50LmRyaXZlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIERyaXZlIEFQSSBub3QgbG9hZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICAgICAgaWYgKCFpc0dvb2dsZUF1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGF1dGhlbnRpY2F0ZWQgd2l0aCBHb29nbGUnKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0xpc3RpbmcgR29vZ2xlIERyaXZlIGZpbGVzIHdpdGggcXVlcnk6JywgcXVlcnkgfHwgJ05vIHF1ZXJ5Jyk7XG4gICAgICBcbiAgICAgIHdpbmRvdy5nYXBpLmNsaWVudC5kcml2ZS5maWxlcy5saXN0KHtcbiAgICAgICAgcTogcXVlcnksXG4gICAgICAgIGZpZWxkczogJ2ZpbGVzKGlkLCBuYW1lLCBtaW1lVHlwZSwgaWNvbkxpbmssIG1vZGlmaWVkVGltZSwgd2ViVmlld0xpbmspJyxcbiAgICAgICAgb3JkZXJCeTogJ21vZGlmaWVkVGltZSBkZXNjJyxcbiAgICAgICAgcGFnZVNpemU6IDUwXG4gICAgICB9KS50aGVuKChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgRHJpdmUgZmlsZXMgcmV0cmlldmVkOicsIHJlc3BvbnNlLnJlc3VsdC5maWxlcy5sZW5ndGgpO1xuICAgICAgICByZXNvbHZlKHJlc3BvbnNlLnJlc3VsdC5maWxlcyk7XG4gICAgICB9KS5jYXRjaCgoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIEdvb2dsZSBEcml2ZSBmaWxlczonLCBlcnJvcik7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gbGlzdERyaXZlRmlsZXM6JywgZXJyb3IpO1xuICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLy8gR2V0IGEgc3BlY2lmaWMgZmlsZSBmcm9tIEdvb2dsZSBEcml2ZVxuZXhwb3J0IGNvbnN0IGdldERyaXZlRmlsZSA9IGFzeW5jIChmaWxlSWQ6IHN0cmluZykgPT4ge1xuICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAgaWYgKCFpc0Jyb3dzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBEcml2ZSBBUEkgcmVxdWlyZXMgYSBicm93c2VyIGVudmlyb25tZW50Jyk7XG4gIH1cbiAgXG4gIGlmICghd2luZG93LmdhcGkgfHwgIXdpbmRvdy5nYXBpLmNsaWVudCB8fCAhd2luZG93LmdhcGkuY2xpZW50LmRyaXZlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgRHJpdmUgQVBJIG5vdCBsb2FkZWQnKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZ2V0KHtcbiAgICAgIGZpbGVJZDogZmlsZUlkLFxuICAgICAgZmllbGRzOiAnaWQsIG5hbWUsIG1pbWVUeXBlLCBpY29uTGluaywgbW9kaWZpZWRUaW1lLCB3ZWJWaWV3TGluaywgd2ViQ29udGVudExpbmsnXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgRHJpdmUgZmlsZTonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IERyaXZlIGZpbGU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XG4gIH1cbn07XG5cbi8vIERvd25sb2FkIGEgZmlsZSBmcm9tIEdvb2dsZSBEcml2ZVxuZXhwb3J0IGNvbnN0IGRvd25sb2FkRHJpdmVGaWxlID0gYXN5bmMgKGZpbGVJZDogc3RyaW5nKSA9PiB7XG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICBpZiAoIWlzQnJvd3Nlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignR29vZ2xlIERyaXZlIEFQSSByZXF1aXJlcyBhIGJyb3dzZXIgZW52aXJvbm1lbnQnKTtcbiAgfVxuICBcbiAgaWYgKCF3aW5kb3cuZ2FwaSB8fCAhd2luZG93LmdhcGkuY2xpZW50IHx8ICF3aW5kb3cuZ2FwaS5jbGllbnQuZHJpdmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvb2dsZSBEcml2ZSBBUEkgbm90IGxvYWRlZCcpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdpbmRvdy5nYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xuICAgICAgZmlsZUlkOiBmaWxlSWQsXG4gICAgICBhbHQ6ICdtZWRpYSdcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2UuYm9keTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRvd25sb2FkaW5nIERyaXZlIGZpbGU6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRvd25sb2FkIERyaXZlIGZpbGU6ICR7ZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XG4gIH1cbn07XG5cbi8vIENoZWNrIGlmIEdvb2dsZSBEcml2ZSBBUEkgaXMgcHJvcGVybHkgY29uZmlndXJlZFxuZXhwb3J0IGNvbnN0IGNoZWNrR29vZ2xlRHJpdmVDb25maWcgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9BUElfS0VZO1xuICBjb25zdCBjbGllbnRJZCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9DTElFTlRfSUQ7XG4gIFxuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgaWYgKCFhcGlLZXkpIGVycm9ycy5wdXNoKCdBUEkgS2V5IGlzIG1pc3NpbmcnKTtcbiAgaWYgKCFjbGllbnRJZCkgZXJyb3JzLnB1c2goJ0NsaWVudCBJRCBpcyBtaXNzaW5nJyk7XG4gIFxuICBjb25zdCBjb25maWcgPSB7XG4gICAgYXBpS2V5OiBhcGlLZXkgPyB0cnVlIDogZmFsc2UsXG4gICAgY2xpZW50SWQ6IGNsaWVudElkID8gdHJ1ZSA6IGZhbHNlLFxuICAgIGlzQ29uZmlndXJlZDogISEoYXBpS2V5ICYmIGNsaWVudElkKSxcbiAgICBlcnJvcnM6IGVycm9ycyxcbiAgICBhcGlTdGF0dXM6IHtcbiAgICAgIGdhcGlMb2FkZWQ6IGlzQnJvd3NlciAmJiAhIXdpbmRvdy5nYXBpLFxuICAgICAgY2xpZW50TG9hZGVkOiBpc0Jyb3dzZXIgJiYgISF3aW5kb3cuZ2FwaT8uY2xpZW50LFxuICAgICAgYXV0aExvYWRlZDogaXNCcm93c2VyICYmICEhd2luZG93LmdhcGk/LmF1dGgyLFxuICAgICAgZHJpdmVMb2FkZWQ6IGlzQnJvd3NlciAmJiAhIXdpbmRvdy5nYXBpPy5jbGllbnQ/LmRyaXZlXG4gICAgfVxuICB9O1xuICBcbiAgY29uc29sZS5sb2coJ0dvb2dsZSBEcml2ZSBBUEkgY29uZmlndXJhdGlvbjonLCBjb25maWcpO1xuICBcbiAgcmV0dXJuIGNvbmZpZztcbn07ICJdLCJuYW1lcyI6WyJpc0Jyb3dzZXIiLCJsb2FkR29vZ2xlQXBpIiwidXNlTWFudWFsQ3JlZGVudGlhbHMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJ3aW5kb3ciLCJnYXBpIiwiY2xpZW50IiwiZHJpdmUiLCJsb2ciLCJjYWxsYmFja05hbWUiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJpbml0aWFsaXplR29vZ2xlQ2xpZW50Iiwic2NyaXB0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiYXN5bmMiLCJkZWZlciIsIm9ubG9hZCIsIm9uZXJyb3IiLCJlcnJvciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImxvYWQiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX0FQSV9LRVkiLCJjbGllbnRJZCIsIk5FWFRfUFVCTElDX0dPT0dMRV9DTElFTlRfSUQiLCJtYW51YWxBcGlLZXkiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJtYW51YWxDbGllbnRJZCIsImFwaUtleUF2YWlsYWJsZSIsImNsaWVudElkQXZhaWxhYmxlIiwiaW5pdCIsImRpc2NvdmVyeURvY3MiLCJzY29wZSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiaXNHb29nbGVBdXRoZW50aWNhdGVkIiwiYXV0aDIiLCJhdXRoSW5zdGFuY2UiLCJnZXRBdXRoSW5zdGFuY2UiLCJpc1NpZ25lZEluIiwiZ2V0Iiwic2lnbkluV2l0aEdvb2dsZSIsInNpZ25JbiIsInNpZ25PdXRGcm9tR29vZ2xlIiwic2lnbk91dCIsImxpc3REcml2ZUZpbGVzIiwicXVlcnkiLCJmaWxlcyIsImxpc3QiLCJxIiwiZmllbGRzIiwib3JkZXJCeSIsInBhZ2VTaXplIiwidGhlbiIsInJlc3BvbnNlIiwicmVzdWx0IiwibGVuZ3RoIiwiY2F0Y2giLCJnZXREcml2ZUZpbGUiLCJmaWxlSWQiLCJkb3dubG9hZERyaXZlRmlsZSIsImFsdCIsImNoZWNrR29vZ2xlRHJpdmVDb25maWciLCJlcnJvcnMiLCJwdXNoIiwiY29uZmlnIiwiaXNDb25maWd1cmVkIiwiYXBpU3RhdHVzIiwiZ2FwaUxvYWRlZCIsImNsaWVudExvYWRlZCIsImF1dGhMb2FkZWQiLCJkcml2ZUxvYWRlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/googleDrive.ts\n"));

/***/ })

});